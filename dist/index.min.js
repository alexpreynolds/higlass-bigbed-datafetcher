var tu=Object.create;var vr=Object.defineProperty;var ru=Object.getOwnPropertyDescriptor;var nu=Object.getOwnPropertyNames;var iu=Object.getPrototypeOf,ou=Object.prototype.hasOwnProperty;var z=(r,t)=>()=>(r&&(t=r(r=0)),t);var ie=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),au=(r,t)=>{for(var e in t)vr(r,e,{get:t[e],enumerable:!0})},uo=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nu(t))!ou.call(r,i)&&i!==e&&vr(r,i,{get:()=>t[i],enumerable:!(n=ru(t,i))||n.enumerable});return r};var Re=(r,t,e)=>(e=r!=null?tu(iu(r)):{},uo(t||!r||!r.__esModule?vr(e,"default",{value:r,enumerable:!0}):e,r)),su=r=>uo(vr({},"__esModule",{value:!0}),r);function co(){throw new Error("setTimeout has not been defined")}function ho(){throw new Error("clearTimeout has not been defined")}function po(r){if(Ue===setTimeout)return setTimeout(r,0);if((Ue===co||!Ue)&&setTimeout)return Ue=setTimeout,setTimeout(r,0);try{return Ue(r,0)}catch(t){try{return Ue.call(null,r,0)}catch(e){return Ue.call(this,r,0)}}}function fu(r){if(Pe===clearTimeout)return clearTimeout(r);if((Pe===ho||!Pe)&&clearTimeout)return Pe=clearTimeout,clearTimeout(r);try{return Pe(r)}catch(t){try{return Pe.call(null,r)}catch(e){return Pe.call(this,r)}}}function uu(){!mt||!We||(mt=!1,We.length?Ce=We.concat(Ce):xr=-1,Ce.length&&mo())}function mo(){if(!mt){var r=po(uu);mt=!0;for(var t=Ce.length;t;){for(We=Ce,Ce=[];++xr<t;)We&&We[xr].run();xr=-1,t=Ce.length}We=null,mt=!1,fu(r)}}function lu(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Ce.push(new wo(r,t)),Ce.length===1&&!mt&&po(mo)}function wo(r,t){this.fun=r,this.array=t}function Ge(){}function Cu(r){throw new Error("process.binding is not supported")}function Su(){return"/"}function ku(r){throw new Error("process.chdir is not supported")}function Iu(){return 0}function Fu(r){var t=$u.call(dt)*.001,e=Math.floor(t),n=Math.floor(t%1*1e9);return r&&(e=e-r[0],n=n-r[1],n<0&&(e--,n+=1e9)),[e,n]}function Nu(){var r=new Date,t=r-Ou;return t/1e3}var Ue,Pe,Ce,mt,We,xr,cu,hu,pu,du,mu,wu,gu,_u,bu,vu,xu,yu,Eu,Au,Tu,Ru,dt,$u,Ou,b,lo,h=z(()=>{Ue=co,Pe=ho;typeof globalThis.setTimeout=="function"&&(Ue=setTimeout);typeof globalThis.clearTimeout=="function"&&(Pe=clearTimeout);Ce=[],mt=!1,xr=-1;wo.prototype.run=function(){this.fun.apply(null,this.array)};cu="browser",hu="browser",pu=!0,du={},mu=[],wu="",gu={},_u={},bu={};vu=Ge,xu=Ge,yu=Ge,Eu=Ge,Au=Ge,Tu=Ge,Ru=Ge;dt=globalThis.performance||{},$u=dt.now||dt.mozNow||dt.msNow||dt.oNow||dt.webkitNow||function(){return new Date().getTime()};Ou=new Date;b={nextTick:lu,title:cu,browser:pu,env:du,argv:mu,version:wu,versions:gu,on:vu,addListener:xu,once:yu,off:Eu,removeListener:Au,removeAllListeners:Tu,emit:Ru,binding:Cu,cwd:Su,chdir:ku,umask:Iu,hrtime:Fu,platform:hu,release:_u,config:bu,uptime:Nu},lo={};Object.keys(lo).forEach(r=>{let t=r.split("."),e=b;for(let n=0;n<t.length;n++){let i=t[n];n===t.length-1?e[i]=lo[r]:e=e[i]||(e[i]={})}})});function vo(){Fn=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)ge[t]=r[t],oe[r.charCodeAt(t)]=t;oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63}function Uu(r){Fn||vo();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Bu(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=oe[r.charCodeAt(t)]<<18|oe[r.charCodeAt(t+1)]<<12|oe[r.charCodeAt(t+2)]<<6|oe[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=oe[r.charCodeAt(t)]<<2|oe[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=oe[r.charCodeAt(t)]<<10|oe[r.charCodeAt(t+1)]<<4|oe[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Pu(r){return ge[r>>18&63]+ge[r>>12&63]+ge[r>>6&63]+ge[r&63]}function Du(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Pu(n));return i.join("")}function go(r){Fn||vo();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(Du(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=ge[t>>2],i+=ge[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=ge[t>>10],i+=ge[t>>4&63],i+=ge[t<<2&63],i+="="),o.push(i),o.join("")}function yr(){return w.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Se(r,t){if(yr()<t)throw new RangeError("Invalid typed array length");return w.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=w.prototype):(r===null&&(r=new w(t)),r.length=t),r}function w(r,t,e){if(!w.TYPED_ARRAY_SUPPORT&&!(this instanceof w))return new w(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return On(this,r)}return xo(this,r,t,e)}function xo(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Mu(r,t,e,n):typeof t=="string"?Lu(r,t,e):Vu(r,t)}function yo(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function zu(r,t,e,n){return yo(t),t<=0?Se(r,t):e!==void 0?typeof n=="string"?Se(r,t).fill(e,n):Se(r,t).fill(e):Se(r,t)}function On(r,t){if(yo(t),r=Se(r,t<0?0:Nn(t)|0),!w.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}function Lu(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!w.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=Eo(t,e)|0;r=Se(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function $n(r,t){var e=t.length<0?0:Nn(t.length)|0;r=Se(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Mu(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),w.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=w.prototype):r=$n(r,t),r}function Vu(r,t){if(_e(t)){var e=Nn(t.length)|0;return r=Se(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||sl(t.length)?Se(r,0):$n(r,t);if(t.type==="Buffer"&&Array.isArray(t.data))return $n(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Nn(r){if(r>=yr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yr().toString(16)+" bytes");return r|0}function _e(r){return!!(r!=null&&r._isBuffer)}function Eo(r,t){if(_e(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Er(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Io(r).length;default:if(n)return Er(r).length;t=(""+t).toLowerCase(),n=!0}}function Yu(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return Qu(this,t,e);case"utf8":case"utf-8":return Ro(this,t,e);case"ascii":return Xu(this,t,e);case"latin1":case"binary":return Ju(this,t,e);case"base64":return qu(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return el(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function qe(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function Ao(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=w.from(t,n)),_e(t))return t.length===0?-1:_o(r,t,e,n,i);if(typeof t=="number")return t=t&255,w.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):_o(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _o(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(c,g){return o===1?c[g]:c.readUInt16BE(g*o)}var f;if(i){var u=-1;for(f=e;f<a;f++)if(l(r,f)===l(t,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===s)return u*o}else u!==-1&&(f-=f-u),u=-1}else for(e+s>a&&(e=a-s),f=e;f>=0;f--){for(var d=!0,m=0;m<s;m++)if(l(r,f+m)!==l(t,m)){d=!1;break}if(d)return f}return-1}function Zu(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function Hu(r,t,e,n){return Rr(Er(t,r.length-e),r,e,n)}function To(r,t,e,n){return Rr(ol(t),r,e,n)}function ju(r,t,e,n){return To(r,t,e,n)}function Wu(r,t,e,n){return Rr(Io(t),r,e,n)}function Gu(r,t,e,n){return Rr(al(t,r.length-e),r,e,n)}function qu(r,t,e){return t===0&&e===r.length?go(r):go(r.slice(t,e))}function Ro(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,f,u,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(d=(o&31)<<6|l&63,d>127&&(a=d));break;case 3:l=r[i+1],f=r[i+2],(l&192)===128&&(f&192)===128&&(d=(o&15)<<12|(l&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:l=r[i+1],f=r[i+2],u=r[i+3],(l&192)===128&&(f&192)===128&&(u&192)===128&&(d=(o&15)<<18|(l&63)<<12|(f&63)<<6|u&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return Ku(n)}function Ku(r){var t=r.length;if(t<=bo)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=bo));return e}function Xu(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function Ju(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function Qu(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=il(r[o]);return i}function el(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function L(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}function K(r,t,e,n,i,o){if(!_e(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}function Ar(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function Tr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}function Co(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function So(r,t,e,n,i){return i||Co(r,t,e,4,34028234663852886e22,-34028234663852886e22),Fo(r,t,e,n,23,4),e+4}function ko(r,t,e,n,i){return i||Co(r,t,e,8,17976931348623157e292,-17976931348623157e292),Fo(r,t,e,n,52,8),e+8}function rl(r){if(r=nl(r).replace(tl,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function nl(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function il(r){return r<16?"0"+r.toString(16):r.toString(16)}function Er(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function ol(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function al(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Io(r){return Uu(rl(r))}function Rr(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function sl(r){return r!==r}function fl(r){return r!=null&&(!!r._isBuffer||$o(r)||ul(r))}function $o(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function ul(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&$o(r.slice(0,0))}function Cr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,f=l>>1,u=-7,d=e?i-1:0,m=e?-1:1,c=r[t+d];for(d+=m,o=c&(1<<-u)-1,c>>=-u,u+=s;u>0;o=o*256+r[t+d],d+=m,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=a*256+r[t+d],d+=m,u-=8);if(o===0)o=1-f;else{if(o===l)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-f}return(c?-1:1)*a*Math.pow(2,o-n)}function Fo(r,t,e,n,i,o){var a,s,l,f=o*8-i-1,u=(1<<f)-1,d=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=m/l:t+=m*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a=a+d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;r[e+c]=s&255,c+=g,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;r[e+c]=a&255,c+=g,a/=256,f-=8);r[e+c-g]|=_*128}var ge,oe,Bu,Fn,bo,tl,Oo=z(()=>{h();p();ge=[],oe=[],Bu=typeof Uint8Array!="undefined"?Uint8Array:Array,Fn=!1;w.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;w.poolSize=8192;w._augment=function(r){return r.__proto__=w.prototype,r};w.from=function(r,t,e){return xo(null,r,t,e)};w.kMaxLength=yr();w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&w[Symbol.species]);w.alloc=function(r,t,e){return zu(null,r,t,e)};w.allocUnsafe=function(r){return On(null,r)};w.allocUnsafeSlow=function(r){return On(null,r)};w.isBuffer=fl;w.compare=function(t,e){if(!_e(t)||!_e(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};w.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};w.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return w.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=w.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!_e(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};w.byteLength=Eo;w.prototype._isBuffer=!0;w.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)qe(this,e,e+1);return this};w.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)qe(this,e,e+3),qe(this,e+1,e+2);return this};w.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)qe(this,e,e+7),qe(this,e+1,e+6),qe(this,e+2,e+5),qe(this,e+3,e+4);return this};w.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ro(this,0,t):Yu.apply(this,arguments)};w.prototype.equals=function(t){if(!_e(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:w.compare(this,t)===0};w.prototype.compare=function(t,e,n,i,o){if(!_e(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),f=this.slice(i,o),u=t.slice(e,n),d=0;d<l;++d)if(f[d]!==u[d]){a=f[d],s=u[d];break}return a<s?-1:s<a?1:0};w.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};w.prototype.indexOf=function(t,e,n){return Ao(this,t,e,n,!0)};w.prototype.lastIndexOf=function(t,e,n){return Ao(this,t,e,n,!1)};w.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Zu(this,t,e,n);case"utf8":case"utf-8":return Hu(this,t,e,n);case"ascii":return To(this,t,e,n);case"latin1":case"binary":return ju(this,t,e,n);case"base64":return Wu(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gu(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};bo=4096;w.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(w.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=w.prototype;else{var o=e-t;i=new w(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};w.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||L(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};w.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||L(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};w.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]};w.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8};w.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]};w.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};w.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};w.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||L(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};w.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||L(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};w.prototype.readInt8=function(t,e){return e||L(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};w.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};w.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};w.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};w.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};w.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),Cr(this,t,!0,23,4)};w.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),Cr(this,t,!1,23,4)};w.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),Cr(this,t,!0,52,8)};w.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),Cr(this,t,!1,52,8)};w.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;K(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};w.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;K(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};w.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,1,255,0),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};w.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2};w.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Ar(this,t,e,!1),e+2};w.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):Tr(this,t,e,!0),e+4};w.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Tr(this,t,e,!1),e+4};w.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);K(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};w.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);K(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};w.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,1,127,-128),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};w.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2};w.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Ar(this,t,e,!1),e+2};w.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,4,2147483647,-2147483648),w.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Tr(this,t,e,!0),e+4};w.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):Tr(this,t,e,!1),e+4};w.prototype.writeFloatLE=function(t,e,n){return So(this,t,e,!0,n)};w.prototype.writeFloatBE=function(t,e,n){return So(this,t,e,!1,n)};w.prototype.writeDoubleLE=function(t,e,n){return ko(this,t,e,!0,n)};w.prototype.writeDoubleBE=function(t,e,n){return ko(this,t,e,!1,n)};w.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!w.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};w.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!w.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=_e(t)?t:Er(new w(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};tl=/[^+\/0-9A-Za-z-_]/g});var p=z(()=>{Oo()});function Bt(){if(!Sr&&(Sr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sr(ll)}var Sr,ll,Bn=z(()=>{h();p();ll=new Uint8Array(16)});var No,Bo=z(()=>{h();p();No=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function cl(r){return typeof r=="string"&&No.test(r)}var De,Ut=z(()=>{h();p();Bo();De=cl});function hl(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Y[r[t+0]]+Y[r[t+1]]+Y[r[t+2]]+Y[r[t+3]]+"-"+Y[r[t+4]]+Y[r[t+5]]+"-"+Y[r[t+6]]+Y[r[t+7]]+"-"+Y[r[t+8]]+Y[r[t+9]]+"-"+Y[r[t+10]]+Y[r[t+11]]+Y[r[t+12]]+Y[r[t+13]]+Y[r[t+14]]+Y[r[t+15]]).toLowerCase();if(!De(e))throw TypeError("Stringified UUID is invalid");return e}var Y,kr,ze,Pt=z(()=>{h();p();Ut();Y=[];for(kr=0;kr<256;++kr)Y.push((kr+256).toString(16).substr(1));ze=hl});function pl(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var o=r.node||Uo,a=r.clockseq!==void 0?r.clockseq:Un;if(o==null||a==null){var s=r.random||(r.rng||Bt)();o==null&&(o=Uo=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=Un=(s[6]<<8|s[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),f=r.nsecs!==void 0?r.nsecs:Dn+1,u=l-Pn+(f-Dn)/1e4;if(u<0&&r.clockseq===void 0&&(a=a+1&16383),(u<0||l>Pn)&&r.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Pn=l,Dn=f,Un=a,l+=122192928e5;var d=((l&268435455)*1e4+f)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;var m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var c=0;c<6;++c)i[n+c]=o[c];return t||ze(i)}var Uo,Un,Pn,Dn,Po,Do=z(()=>{h();p();Bn();Pt();Pn=0,Dn=0;Po=pl});function dl(r){if(!De(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var Ir,zn=z(()=>{h();p();Ut();Ir=dl});function ml(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}function $r(r,t,e){function n(i,o,a,s){if(typeof i=="string"&&(i=ml(i)),typeof o=="string"&&(o=Ir(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){s=s||0;for(var f=0;f<16;++f)a[s+f]=l[f];return a}return ze(l)}try{n.name=r}catch(i){}return n.DNS=wl,n.URL=gl,n}var wl,gl,Ln=z(()=>{h();p();Pt();zn();wl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",gl="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function _l(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return bl(vl(xl(r),r.length*8))}function bl(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var o=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(a)}return t}function zo(r){return(r+64>>>9<<4)+14+1}function vl(r,t){r[t>>5]|=128<<t%32,r[zo(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<r.length;a+=16){var s=e,l=n,f=i,u=o;e=H(e,n,i,o,r[a],7,-680876936),o=H(o,e,n,i,r[a+1],12,-389564586),i=H(i,o,e,n,r[a+2],17,606105819),n=H(n,i,o,e,r[a+3],22,-1044525330),e=H(e,n,i,o,r[a+4],7,-176418897),o=H(o,e,n,i,r[a+5],12,1200080426),i=H(i,o,e,n,r[a+6],17,-1473231341),n=H(n,i,o,e,r[a+7],22,-45705983),e=H(e,n,i,o,r[a+8],7,1770035416),o=H(o,e,n,i,r[a+9],12,-1958414417),i=H(i,o,e,n,r[a+10],17,-42063),n=H(n,i,o,e,r[a+11],22,-1990404162),e=H(e,n,i,o,r[a+12],7,1804603682),o=H(o,e,n,i,r[a+13],12,-40341101),i=H(i,o,e,n,r[a+14],17,-1502002290),n=H(n,i,o,e,r[a+15],22,1236535329),e=j(e,n,i,o,r[a+1],5,-165796510),o=j(o,e,n,i,r[a+6],9,-1069501632),i=j(i,o,e,n,r[a+11],14,643717713),n=j(n,i,o,e,r[a],20,-373897302),e=j(e,n,i,o,r[a+5],5,-701558691),o=j(o,e,n,i,r[a+10],9,38016083),i=j(i,o,e,n,r[a+15],14,-660478335),n=j(n,i,o,e,r[a+4],20,-405537848),e=j(e,n,i,o,r[a+9],5,568446438),o=j(o,e,n,i,r[a+14],9,-1019803690),i=j(i,o,e,n,r[a+3],14,-187363961),n=j(n,i,o,e,r[a+8],20,1163531501),e=j(e,n,i,o,r[a+13],5,-1444681467),o=j(o,e,n,i,r[a+2],9,-51403784),i=j(i,o,e,n,r[a+7],14,1735328473),n=j(n,i,o,e,r[a+12],20,-1926607734),e=W(e,n,i,o,r[a+5],4,-378558),o=W(o,e,n,i,r[a+8],11,-2022574463),i=W(i,o,e,n,r[a+11],16,1839030562),n=W(n,i,o,e,r[a+14],23,-35309556),e=W(e,n,i,o,r[a+1],4,-1530992060),o=W(o,e,n,i,r[a+4],11,1272893353),i=W(i,o,e,n,r[a+7],16,-155497632),n=W(n,i,o,e,r[a+10],23,-1094730640),e=W(e,n,i,o,r[a+13],4,681279174),o=W(o,e,n,i,r[a],11,-358537222),i=W(i,o,e,n,r[a+3],16,-722521979),n=W(n,i,o,e,r[a+6],23,76029189),e=W(e,n,i,o,r[a+9],4,-640364487),o=W(o,e,n,i,r[a+12],11,-421815835),i=W(i,o,e,n,r[a+15],16,530742520),n=W(n,i,o,e,r[a+2],23,-995338651),e=G(e,n,i,o,r[a],6,-198630844),o=G(o,e,n,i,r[a+7],10,1126891415),i=G(i,o,e,n,r[a+14],15,-1416354905),n=G(n,i,o,e,r[a+5],21,-57434055),e=G(e,n,i,o,r[a+12],6,1700485571),o=G(o,e,n,i,r[a+3],10,-1894986606),i=G(i,o,e,n,r[a+10],15,-1051523),n=G(n,i,o,e,r[a+1],21,-2054922799),e=G(e,n,i,o,r[a+8],6,1873313359),o=G(o,e,n,i,r[a+15],10,-30611744),i=G(i,o,e,n,r[a+6],15,-1560198380),n=G(n,i,o,e,r[a+13],21,1309151649),e=G(e,n,i,o,r[a+4],6,-145523070),o=G(o,e,n,i,r[a+11],10,-1120210379),i=G(i,o,e,n,r[a+2],15,718787259),n=G(n,i,o,e,r[a+9],21,-343485551),e=Le(e,s),n=Le(n,l),i=Le(i,f),o=Le(o,u)}return[e,n,i,o]}function xl(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(zo(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Le(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function yl(r,t){return r<<t|r>>>32-t}function Fr(r,t,e,n,i,o){return Le(yl(Le(Le(t,r),Le(n,o)),i),e)}function H(r,t,e,n,i,o,a){return Fr(t&e|~t&n,r,t,i,o,a)}function j(r,t,e,n,i,o,a){return Fr(t&n|e&~n,r,t,i,o,a)}function W(r,t,e,n,i,o,a){return Fr(t^e^n,r,t,i,o,a)}function G(r,t,e,n,i,o,a){return Fr(e^(t|~n),r,t,i,o,a)}var Lo,Mo=z(()=>{h();p();Lo=_l});var El,Vo,Yo=z(()=>{h();p();Ln();Mo();El=$r("v3",48,Lo),Vo=El});function Al(r,t,e){r=r||{};var n=r.random||(r.rng||Bt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return ze(n)}var Zo,Ho=z(()=>{h();p();Bn();Pt();Zo=Al});function Tl(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Mn(r,t){return r<<t|r>>>32-t}function Rl(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var f=new Uint32Array(16),u=0;u<16;++u)f[u]=r[l*64+u*4]<<24|r[l*64+u*4+1]<<16|r[l*64+u*4+2]<<8|r[l*64+u*4+3];s[l]=f}s[a-1][14]=(r.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(r.length-1)*8&4294967295;for(var d=0;d<a;++d){for(var m=new Uint32Array(80),c=0;c<16;++c)m[c]=s[d][c];for(var g=16;g<80;++g)m[g]=Mn(m[g-3]^m[g-8]^m[g-14]^m[g-16],1);for(var _=e[0],A=e[1],y=e[2],R=e[3],T=e[4],x=0;x<80;++x){var S=Math.floor(x/20),I=Mn(_,5)+Tl(S,A,y,R)+T+t[S]+m[x]>>>0;T=R,R=y,y=Mn(A,30)>>>0,A=_,_=I}e[0]=e[0]+_>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+y>>>0,e[3]=e[3]+R>>>0,e[4]=e[4]+T>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var jo,Wo=z(()=>{h();p();jo=Rl});var Cl,Go,qo=z(()=>{h();p();Ln();Wo();Cl=$r("v5",80,jo),Go=Cl});var Ko,Xo=z(()=>{h();p();Ko="00000000-0000-0000-0000-000000000000"});function Sl(r){if(!De(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Jo,Qo=z(()=>{h();p();Ut();Jo=Sl});var ea={};au(ea,{NIL:()=>Ko,parse:()=>Ir,stringify:()=>ze,v1:()=>Po,v3:()=>Vo,v4:()=>Zo,v5:()=>Go,validate:()=>De,version:()=>Jo});var ta=z(()=>{h();p();Do();Yo();Ho();qo();Xo();Qo();Ut();Pt();zn()});var ra=ie(Dt=>{h();p();var Or=(ta(),su(ea)),Vn=(()=>typeof w!="undefined"?r=>w.from(r).toString("base64"):r=>btoa(String.fromCharCode(...r)))(),kl=(()=>typeof w!="undefined"?r=>w.from(r,"base64"):r=>Uint8Array.from(atob(r),t=>t.charCodeAt(0)))();Dt.encode=function(r){var t=Or.parse(r),e=Vn(t),n=e.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n};Dt.decode=function(r){var t=r.replace(/-/g,"+").replace(/_/g,"/")+"==";return Or.stringify(kl(t))};Dt.v4=function(){var r=Or.v4(null,new Uint8Array(16)),t=Vn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e};Dt.nice=function(){var r=Or.v4(null,new Uint8Array(16));r[0]=r[0]&127;var t=Vn(r),e=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return e}});var ia=ie((Qd,na)=>{h();p();na.exports=ra()});var ka=ie(Lt=>{"use strict";h();p();Object.defineProperty(Lt,"__esModule",{value:!0});function qn(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Kn(r,t,e){return t&&Ra(r.prototype,t),e&&Ra(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function sc(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Gn(r,t)}function wt(r){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(r)}function Gn(r,t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Gn(r,t)}function fc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function zt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function uc(r,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(r)}function lc(r){var t=fc();return function(){var n=wt(r),i;if(t){var o=wt(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return uc(this,i)}}function cc(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=wt(r),r!==null););return r}function Yr(){return typeof Reflect!="undefined"&&Reflect.get?Yr=Reflect.get.bind():Yr=function(t,e,n){var i=cc(t,e);if(!!i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Yr.apply(this,arguments)}var Ca=function(){function r(){qn(this,r),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return Kn(r,[{key:"addEventListener",value:function(e,n,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:n,options:i})}},{key:"removeEventListener",value:function(e,n){if(e in this.listeners){for(var i=this.listeners[e],o=0,a=i.length;o<a;o++)if(i[o].callback===n){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var n=this.listeners[e.type],i=n.slice(),o=0,a=i.length;o<a;o++){var s=i[o];try{s.callback.call(this,e)}catch(l){Promise.resolve().then(function(){throw l})}s.options&&s.options.once&&this.removeEventListener(e.type,s.callback)}return!e.defaultPrevented}}}]),r}(),Xn=function(r){sc(e,r);var t=lc(e);function e(){var n;return qn(this,e),n=t.call(this),n.listeners||Ca.call(zt(n)),Object.defineProperty(zt(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(zt(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(zt(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return Kn(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),Yr(wt(e.prototype),"dispatchEvent",this).call(this,i)}}]),e}(Ca),Sa=function(){function r(){qn(this,r),Object.defineProperty(this,"signal",{value:new Xn,writable:!0,configurable:!0})}return Kn(r,[{key:"abort",value:function(e){var n;try{n=new Event("abort")}catch(o){typeof document!="undefined"?document.createEvent?(n=document.createEvent("Event"),n.initEvent("abort",!1,!1)):(n=document.createEventObject(),n.type="abort"):n={type:"abort",bubbles:!1,cancelable:!1}}var i=e;if(i===void 0)if(typeof document=="undefined")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch(o){i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(n)}},{key:"toString",value:function(){return"[object AbortController]"}}]),r}();typeof Symbol!="undefined"&&Symbol.toStringTag&&(Sa.prototype[Symbol.toStringTag]="AbortController",Xn.prototype[Symbol.toStringTag]="AbortSignal");function hc(r){return r.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof r.Request=="function"&&!r.Request.prototype.hasOwnProperty("signal")||!r.AbortController}function pc(r){typeof r=="function"&&(r={fetch:r});var t=r,e=t.fetch,n=t.Request,i=n===void 0?e.Request:n,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?!1:a;if(!hc({fetch:e,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:e,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&(l=function(m,c){var g;c&&c.signal&&(g=c.signal,delete c.signal);var _=new i(m,c);return g&&Object.defineProperty(_,"signal",{writable:!1,enumerable:!1,configurable:!0,value:g}),_},l.prototype=i.prototype);var f=e,u=function(m,c){var g=l&&l.prototype.isPrototypeOf(m)?m.signal:c?c.signal:void 0;if(g){var _;try{_=new DOMException("Aborted","AbortError")}catch(y){_=new Error("Aborted"),_.name="AbortError"}if(g.aborted)return Promise.reject(_);var A=new Promise(function(y,R){g.addEventListener("abort",function(){return R(_)},{once:!0})});return c&&c.signal&&delete c.signal,Promise.race([A,f(m,c)])}return f(m,c)};return{fetch:u,Request:l}}Lt.AbortController=Sa;Lt.AbortSignal=Xn;Lt.abortableFetch=pc});var Jn=ie(gt=>{"use strict";h();p();Object.defineProperty(gt,"__esModule",{value:!0});gt.AbortSignal=gt.AbortController=void 0;var Ia=ka(),Zr=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof globalThis!="undefined")return globalThis;throw new Error("unable to locate global object")},dc=typeof Zr().AbortController=="undefined"?Ia.AbortController:Zr().AbortController;gt.AbortController=dc;var mc=typeof Zr().AbortController=="undefined"?Ia.AbortSignal:Zr().AbortSignal;gt.AbortSignal=mc});var $a=ie(ti=>{"use strict";h();p();Object.defineProperty(ti,"__esModule",{value:!0});var wc=Jn(),Qn=class{},ei=class{constructor(){this.signals=new Set,this.abortController=new wc.AbortController}addSignal(t=new Qn){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}};ti.default=ei});var Fa=ie(ni=>{"use strict";h();p();Object.defineProperty(ni,"__esModule",{value:!0});var ri=class{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),t(this.currentMessage)}callback(t){this.currentMessage=t,this.callbacks.forEach(e=>{e(t)})}};ni.default=ri});var Na=ie(Mt=>{"use strict";h();p();var Oa=Mt&&Mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mt,"__esModule",{value:!0});var gc=Jn(),_c=Oa($a()),bc=Oa(Fa()),_t=class{constructor({fill:t,cache:e}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof e!="object")throw new TypeError("must pass a cache object");if(typeof e.get!="function"||typeof e.set!="function"||typeof e.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=e,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,e){this.cache.get(t)===e&&this.cache.delete(t)}fill(t,e,n,i){let o=new _c.default,a=new bc.default;a.addCallback(i);let s={aborter:o,promise:this.fillCallback(e,o.signal,l=>{a.callback(l)}),settled:!1,statusReporter:a,get aborted(){return this.aborter.signal.aborted}};s.aborter.addSignal(n),s.aborter.signal.addEventListener("abort",()=>{s.settled||this.evict(t,s)}),s.promise.then(()=>{s.settled=!0},()=>{s.settled=!0,this.evict(t,s)}).catch(l=>{throw console.error(l),l}),this.cache.set(t,s)}static checkSinglePromise(t,e){function n(){if(e&&e.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(n(),i),i=>{throw n(),i})}has(t){return this.cache.has(t)}get(t,e,n,i){if(!n&&e instanceof gc.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");let o=this.cache.get(t);return o?o.aborted&&!o.settled?(this.evict(t,o),this.get(t,e,n,i)):o.settled?o.promise:(o.aborter.addSignal(n),o.statusReporter.addCallback(i),_t.checkSinglePromise(o.promise,n)):(this.fill(t,e,n,i),_t.checkSinglePromise(this.cache.get(t).promise,n))}delete(t){let e=this.cache.get(t);e&&(e.settled||e.aborter.abort(),this.cache.delete(t))}clear(){let t=this.cache.keys(),e=0;for(let n=t.next();!n.done;n=t.next())this.delete(n.value),e+=1;return e}};Mt.default=_t});var ii=ie(Vt=>{"use strict";h();p();var vc=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});var xc=vc(Na());Vt.default=xc.default});var ai=ie((cm,Ba)=>{"use strict";h();p();var oi=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let e=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(let e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}};Ba.exports=oi});var zi=ie(()=>{h();p()});var Lf=ie(()=>{h();p()});var Mf=ie((An,wr)=>{h();p();(function(r){var t=typeof An=="object"&&An,e=typeof wr=="object"&&wr&&wr.exports==t&&wr,n=typeof globalThis=="object"&&globalThis;(n.global===n||n.window===n)&&(r=n);var i=function(m){this.message=m};i.prototype=new Error,i.prototype.name="InvalidCharacterError";var o=function(m){throw new i(m)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,l=function(m){m=String(m).replace(s,"");var c=m.length;c%4==0&&(m=m.replace(/==?$/,""),c=m.length),(c%4==1||/[^+a-zA-Z0-9/]/.test(m))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var g=0,_,A,y="",R=-1;++R<c;)A=a.indexOf(m.charAt(R)),_=g%4?_*64+A:A,g++%4&&(y+=String.fromCharCode(255&_>>(-2*g&6)));return y},f=function(m){m=String(m),/[^\0-\xFF]/.test(m)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var c=m.length%3,g="",_=-1,A,y,R,T,x=m.length-c;++_<x;)A=m.charCodeAt(_)<<16,y=m.charCodeAt(++_)<<8,R=m.charCodeAt(++_),T=A+y+R,g+=a.charAt(T>>18&63)+a.charAt(T>>12&63)+a.charAt(T>>6&63)+a.charAt(T&63);return c==2?(A=m.charCodeAt(_)<<8,y=m.charCodeAt(++_),T=A+y,g+=a.charAt(T>>10)+a.charAt(T>>4&63)+a.charAt(T<<2&63)+"="):c==1&&(T=m.charCodeAt(_),g+=a.charAt(T>>2)+a.charAt(T<<4&63)+"=="),g},u={encode:f,decode:l,version:"1.0.0"};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return u});else if(t&&!t.nodeType)if(e)e.exports=u;else for(var d in u)u.hasOwnProperty(d)&&(t[d]=u[d]);else r.base64=u})(An)});h();p();h();p();var Jf=Re(ia(),1);h();p();h();p();h();p();var Nr=BigInt(32);function oa(r,t,e){let n=Number(!!e),i=Number(!e);return BigInt(r.getInt32(t,e)*i+r.getInt32(t+4,e)*n)<<Nr|BigInt(r.getUint32(t,e)*n+r.getUint32(t+4,e)*i)}function aa(r,t,e){let n=r.getUint32(t,e),i=r.getUint32(t+4,e),o=Number(!!e),a=Number(!e);return BigInt(n*a+i*o)<<Nr|BigInt(n*o+i*a)}function sa(r,t,e,n){let i=Number(e>>Nr),o=Number(e&BigInt(4294967295));n?(r.setInt32(t+4,i,n),r.setUint32(t,o,n)):(r.setInt32(t,i,n),r.setUint32(t+4,o,n))}function fa(r,t,e,n){let i=Number(e>>Nr),o=Number(e&BigInt(4294967295));n?(r.setUint32(t+4,i,n),r.setUint32(t,o,n)):(r.setUint32(t,i,n),r.setUint32(t+4,o,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(r,t){return oa(this,r,t)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(r,t){return aa(this,r,t)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(r,t,e){sa(this,r,t,e)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(r,t,e){fa(this,r,t,e)});h();p();h();p();h();p();var be=[],ae=[],Il=typeof Uint8Array!="undefined"?Uint8Array:Array,Zn=!1;function ha(){Zn=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)be[t]=r[t],ae[r.charCodeAt(t)]=t;ae["-".charCodeAt(0)]=62,ae["_".charCodeAt(0)]=63}function $l(r){Zn||ha();var t,e,n,i,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Il(s*3/4-o),n=o>0?s-4:s;var l=0;for(t=0,e=0;t<n;t+=4,e+=3)i=ae[r.charCodeAt(t)]<<18|ae[r.charCodeAt(t+1)]<<12|ae[r.charCodeAt(t+2)]<<6|ae[r.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=i&255;return o===2?(i=ae[r.charCodeAt(t)]<<2|ae[r.charCodeAt(t+1)]>>4,a[l++]=i&255):o===1&&(i=ae[r.charCodeAt(t)]<<10|ae[r.charCodeAt(t+1)]<<4|ae[r.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=i&255),a}function Fl(r){return be[r>>18&63]+be[r>>12&63]+be[r>>6&63]+be[r&63]}function Ol(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(Fl(n));return i.join("")}function ua(r){Zn||ha();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,s=0,l=e-n;s<l;s+=a)o.push(Ol(r,s,s+a>l?l:s+a));return n===1?(t=r[e-1],i+=be[t>>2],i+=be[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=be[t>>10],i+=be[t>>4&63],i+=be[t<<2&63],i+="="),o.push(i),o.join("")}function Pr(r,t,e,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,f=l>>1,u=-7,d=e?i-1:0,m=e?-1:1,c=r[t+d];for(d+=m,o=c&(1<<-u)-1,c>>=-u,u+=s;u>0;o=o*256+r[t+d],d+=m,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=a*256+r[t+d],d+=m,u-=8);if(o===0)o=1-f;else{if(o===l)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-f}return(c?-1:1)*a*Math.pow(2,o-n)}function pa(r,t,e,n,i,o){var a,s,l,f=o*8-i-1,u=(1<<f)-1,d=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,g=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=m/l:t+=m*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a=a+d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;r[e+c]=s&255,c+=g,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;r[e+c]=a&255,c+=g,a/=256,f-=8);r[e+c-g]|=_*128}var Nl={}.toString,da=Array.isArray||function(r){return Nl.call(r)=="[object Array]"};var Bl=50;v.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;var rm=Br();function Br(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ke(r,t){if(Br()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=v.prototype):(r===null&&(r=new v(t)),r.length=t),r}function v(r,t,e){if(!v.TYPED_ARRAY_SUPPORT&&!(this instanceof v))return new v(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Hn(this,r)}return ma(this,r,t,e)}v.poolSize=8192;v._augment=function(r){return r.__proto__=v.prototype,r};function ma(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer?Dl(r,t,e,n):typeof t=="string"?Pl(r,t,e):zl(r,t)}v.from=function(r,t,e){return ma(null,r,t,e)};v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array);function wa(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Ul(r,t,e,n){return wa(t),t<=0?ke(r,t):e!==void 0?typeof n=="string"?ke(r,t).fill(e,n):ke(r,t).fill(e):ke(r,t)}v.alloc=function(r,t,e){return Ul(null,r,t,e)};function Hn(r,t){if(wa(t),r=ke(r,t<0?0:jn(t)|0),!v.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}v.allocUnsafe=function(r){return Hn(null,r)};v.allocUnsafeSlow=function(r){return Hn(null,r)};function Pl(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!v.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=ga(t,e)|0;r=ke(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function Yn(r,t){var e=t.length<0?0:jn(t.length)|0;r=ke(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Dl(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),v.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=v.prototype):r=Yn(r,t),r}function zl(r,t){if(ve(t)){var e=jn(t.length)|0;return r=ke(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer!="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||ic(t.length)?ke(r,0):Yn(r,t);if(t.type==="Buffer"&&da(t.data))return Yn(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function jn(r){if(r>=Br())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Br().toString(16)+" bytes");return r|0}v.isBuffer=oc;function ve(r){return!!(r!=null&&r._isBuffer)}v.compare=function(t,e){if(!ve(t)||!ve(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};v.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};v.concat=function(t,e){if(!da(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return v.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=v.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!ve(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function ga(r,t){if(ve(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Ur(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Aa(r).length;default:if(n)return Ur(r).length;t=(""+t).toLowerCase(),n=!0}}v.byteLength=ga;function Ll(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return Kl(this,t,e);case"utf8":case"utf-8":return va(this,t,e);case"ascii":return Gl(this,t,e);case"latin1":case"binary":return ql(this,t,e);case"base64":return jl(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xl(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}v.prototype._isBuffer=!0;function Ke(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}v.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ke(this,e,e+1);return this};v.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ke(this,e,e+3),Ke(this,e+1,e+2);return this};v.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ke(this,e,e+7),Ke(this,e+1,e+6),Ke(this,e+2,e+5),Ke(this,e+3,e+4);return this};v.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?va(this,0,t):Ll.apply(this,arguments)};v.prototype.equals=function(t){if(!ve(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:v.compare(this,t)===0};v.prototype.inspect=function(){var t="",e=Bl;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};v.prototype.compare=function(t,e,n,i,o){if(!ve(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-e,l=Math.min(a,s),f=this.slice(i,o),u=t.slice(e,n),d=0;d<l;++d)if(f[d]!==u[d]){a=f[d],s=u[d];break}return a<s?-1:s<a?1:0};function _a(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=v.from(t,n)),ve(t))return t.length===0?-1:la(r,t,e,n,i);if(typeof t=="number")return t=t&255,v.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):la(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function la(r,t,e,n,i){var o=1,a=r.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(c,g){return o===1?c[g]:c.readUInt16BE(g*o)}var f;if(i){var u=-1;for(f=e;f<a;f++)if(l(r,f)===l(t,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===s)return u*o}else u!==-1&&(f-=f-u),u=-1}else for(e+s>a&&(e=a-s),f=e;f>=0;f--){for(var d=!0,m=0;m<s;m++)if(l(r,f+m)!==l(t,m)){d=!1;break}if(d)return f}return-1}v.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};v.prototype.indexOf=function(t,e,n){return _a(this,t,e,n,!0)};v.prototype.lastIndexOf=function(t,e,n){return _a(this,t,e,n,!1)};function Ml(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(isNaN(s))return a;r[e+a]=s}return a}function Vl(r,t,e,n){return Lr(Ur(t,r.length-e),r,e,n)}function ba(r,t,e,n){return Lr(rc(t),r,e,n)}function Yl(r,t,e,n){return ba(r,t,e,n)}function Zl(r,t,e,n){return Lr(Aa(t),r,e,n)}function Hl(r,t,e,n){return Lr(nc(t,r.length-e),r,e,n)}v.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Ml(this,t,e,n);case"utf8":case"utf-8":return Vl(this,t,e,n);case"ascii":return ba(this,t,e,n);case"latin1":case"binary":return Yl(this,t,e,n);case"base64":return Zl(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hl(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function jl(r,t,e){return t===0&&e===r.length?ua(r):ua(r.slice(t,e))}function va(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var l,f,u,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(d=(o&31)<<6|l&63,d>127&&(a=d));break;case 3:l=r[i+1],f=r[i+2],(l&192)===128&&(f&192)===128&&(d=(o&15)<<12|(l&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:l=r[i+1],f=r[i+2],u=r[i+3],(l&192)===128&&(f&192)===128&&(u&192)===128&&(d=(o&15)<<18|(l&63)<<12|(f&63)<<6|u&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=s}return Wl(n)}var ca=4096;function Wl(r){var t=r.length;if(t<=ca)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=ca));return e}function Gl(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function ql(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function Kl(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=tc(r[o]);return i}function Xl(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}v.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(v.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=v.prototype;else{var o=e-t;i=new v(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function M(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}v.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||M(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};v.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||M(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};v.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]};v.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8};v.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]};v.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};v.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};v.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||M(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};v.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||M(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};v.prototype.readInt8=function(t,e){return e||M(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};v.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};v.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};v.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};v.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};v.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),Pr(this,t,!0,23,4)};v.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),Pr(this,t,!1,23,4)};v.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),Pr(this,t,!0,52,8)};v.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),Pr(this,t,!1,52,8)};function X(r,t,e,n,i,o){if(!ve(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}v.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;X(this,t,e,n,o,0)}var a=1,s=0;for(this[e]=t&255;++s<n&&(a*=256);)this[e+s]=t/a&255;return e+n};v.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;X(this,t,e,n,o,0)}var a=n-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+n};v.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,1,255,0),v.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function Dr(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}v.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Dr(this,t,e,!0),e+2};v.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Dr(this,t,e,!1),e+2};function zr(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}v.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):zr(this,t,e,!0),e+4};v.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):zr(this,t,e,!1),e+4};v.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);X(this,t,e,n,o-1,-o)}var a=0,s=1,l=0;for(this[e]=t&255;++a<n&&(s*=256);)t<0&&l===0&&this[e+a-1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};v.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);X(this,t,e,n,o-1,-o)}var a=n-1,s=1,l=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&l===0&&this[e+a+1]!==0&&(l=1),this[e+a]=(t/s>>0)-l&255;return e+n};v.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,1,127,-128),v.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};v.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):Dr(this,t,e,!0),e+2};v.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):Dr(this,t,e,!1),e+2};v.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):zr(this,t,e,!0),e+4};v.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||X(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),v.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):zr(this,t,e,!1),e+4};function xa(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ya(r,t,e,n,i){return i||xa(r,t,e,4),pa(r,t,e,n,23,4),e+4}v.prototype.writeFloatLE=function(t,e,n){return ya(this,t,e,!0,n)};v.prototype.writeFloatBE=function(t,e,n){return ya(this,t,e,!1,n)};function Ea(r,t,e,n,i){return i||xa(r,t,e,8),pa(r,t,e,n,52,8),e+8}v.prototype.writeDoubleLE=function(t,e,n){return Ea(this,t,e,!0,n)};v.prototype.writeDoubleBE=function(t,e,n){return Ea(this,t,e,!1,n)};v.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!v.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};v.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!v.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var s=ve(t)?t:Ur(new v(t,i).toString()),l=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%l]}return this};var Jl=/[^+\/0-9A-Za-z-_]/g;function Ql(r){if(r=ec(r).replace(Jl,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ec(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function tc(r){return r<16?"0"+r.toString(16):r.toString(16)}function Ur(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function rc(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function nc(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Aa(r){return $l(Ql(r))}function Lr(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function ic(r){return r!==r}function oc(r){return r!=null&&(!!r._isBuffer||Ta(r)||ac(r))}function Ta(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function ac(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Ta(r.slice(0,0))}h();p();var Wn=class{constructor(t,e){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=t,this.useContextVariables=e}generateVariable(t){let e=[...this.scopes[this.scopes.length-1]];return t&&e.push(t),e.join(".")}generateOption(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return`${this.addImport(t)}.call(${this.generateVariable()}, vars)`}}generateError(t){this.pushCode(`throw new Error(${t});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(t){this.code+=t+`
`}pushPath(t){t&&this.scopes[this.scopes.length-1].push(t)}popPath(t){t&&this.scopes[this.scopes.length-1].pop()}pushScope(t){this.scopes.push([t])}popScope(){this.scopes.pop()}addImport(t){if(!this.importPath)return`(${t})`;let e=this.reverseImports.get(t);return e||(e=this.imports.push(t)-1,this.reverseImports.set(t,e)),`${this.importPath}[${e}]`}addReference(t){this.references.has(t)||this.references.set(t,{resolved:!1,requested:!1})}markResolved(t){let e=this.references.get(t);e&&(e.resolved=!0)}markRequested(t){t.forEach(e=>{let n=this.references.get(e);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([t,e])=>!e.resolved&&!e.requested).map(([t,e])=>t)}},de=new Map,Xe="___parser_",me={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Mr={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Vr={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},F=class{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new F}primitiveGenerateN(t,e){let n=Mr[t],i=Vr[t];e.pushCode(`${e.generateVariable(this.varName)} = dataView.get${n}(offset, ${i});`),e.pushCode(`offset += ${me[t]};`)}primitiveN(t,e,n){return this.setNextParser(t,e,n)}useThisEndian(t){return t+this.endian.toLowerCase()}uint8(t,e={}){return this.primitiveN("uint8",t,e)}uint16(t,e={}){return this.primitiveN(this.useThisEndian("uint16"),t,e)}uint16le(t,e={}){return this.primitiveN("uint16le",t,e)}uint16be(t,e={}){return this.primitiveN("uint16be",t,e)}uint32(t,e={}){return this.primitiveN(this.useThisEndian("uint32"),t,e)}uint32le(t,e={}){return this.primitiveN("uint32le",t,e)}uint32be(t,e={}){return this.primitiveN("uint32be",t,e)}int8(t,e={}){return this.primitiveN("int8",t,e)}int16(t,e={}){return this.primitiveN(this.useThisEndian("int16"),t,e)}int16le(t,e={}){return this.primitiveN("int16le",t,e)}int16be(t,e={}){return this.primitiveN("int16be",t,e)}int32(t,e={}){return this.primitiveN(this.useThisEndian("int32"),t,e)}int32le(t,e={}){return this.primitiveN("int32le",t,e)}int32be(t,e={}){return this.primitiveN("int32be",t,e)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,e)}int64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,e)}int64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,e)}uint64(t,e={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,e)}uint64be(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,e)}uint64le(t,e={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,e)}floatle(t,e={}){return this.primitiveN("floatle",t,e)}floatbe(t,e={}){return this.primitiveN("floatbe",t,e)}doublele(t,e={}){return this.primitiveN("doublele",t,e)}doublebe(t,e={}){return this.primitiveN("doublebe",t,e)}bitN(t,e,n){return n.length=t,this.setNextParser("bit",e,n)}bit1(t,e={}){return this.bitN(1,t,e)}bit2(t,e={}){return this.bitN(2,t,e)}bit3(t,e={}){return this.bitN(3,t,e)}bit4(t,e={}){return this.bitN(4,t,e)}bit5(t,e={}){return this.bitN(5,t,e)}bit6(t,e={}){return this.bitN(6,t,e)}bit7(t,e={}){return this.bitN(7,t,e)}bit8(t,e={}){return this.bitN(8,t,e)}bit9(t,e={}){return this.bitN(9,t,e)}bit10(t,e={}){return this.bitN(10,t,e)}bit11(t,e={}){return this.bitN(11,t,e)}bit12(t,e={}){return this.bitN(12,t,e)}bit13(t,e={}){return this.bitN(13,t,e)}bit14(t,e={}){return this.bitN(14,t,e)}bit15(t,e={}){return this.bitN(15,t,e)}bit16(t,e={}){return this.bitN(16,t,e)}bit17(t,e={}){return this.bitN(17,t,e)}bit18(t,e={}){return this.bitN(18,t,e)}bit19(t,e={}){return this.bitN(19,t,e)}bit20(t,e={}){return this.bitN(20,t,e)}bit21(t,e={}){return this.bitN(21,t,e)}bit22(t,e={}){return this.bitN(22,t,e)}bit23(t,e={}){return this.bitN(23,t,e)}bit24(t,e={}){return this.bitN(24,t,e)}bit25(t,e={}){return this.bitN(25,t,e)}bit26(t,e={}){return this.bitN(26,t,e)}bit27(t,e={}){return this.bitN(27,t,e)}bit28(t,e={}){return this.bitN(28,t,e)}bit29(t,e={}){return this.bitN(29,t,e)}bit30(t,e={}){return this.bitN(30,t,e)}bit31(t,e={}){return this.bitN(31,t,e)}bit32(t,e={}){return this.bitN(32,t,e)}namely(t){return de.set(t,this),this.alias=t,this}skip(t,e={}){return this.seek(t,e)}seek(t,e={}){if(e.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})}string(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!(e.length||e.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)}buffer(t,e){if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",t,e)}wrapped(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.wrapper||!e.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!e.length&&!e.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",t,e)}array(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!e.type)throw new Error("type is required for array.");if(typeof e.type=="string"&&!de.has(e.type)&&!(e.type in me))throw new Error(`Array element type "${e.type}" is unkown.`);return this.setNextParser("array",t,e)}choice(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e)throw new Error("tag and choices are are required for choice.");if(!e.tag)throw new Error("tag is requird for choice.");if(!e.choices)throw new Error("choices is required for choice.");for(let n in e.choices){let i=parseInt(n,10),o=e.choices[i];if(isNaN(i))throw new Error(`Choice key "${n}" is not a number.`);if(typeof o=="string"&&!de.has(o)&&!(o in me))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",t,e)}nest(t,e){if(typeof e!="object"&&typeof t=="object"&&(e=t,t=""),!e||!e.type)throw new Error("type is required for nest.");if(!(e.type instanceof F)&&!de.has(e.type))throw new Error("type must be a known parser name or a Parser object.");if(!(e.type instanceof F)&&!t)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",t,e)}pointer(t,e){if(!e.offset)throw new Error("offset is required for pointer.");if(!e.type)throw new Error("type is required for pointer.");if(typeof e.type=="string"&&!(e.type in me)&&!de.has(e.type))throw new Error(`Pointer type "${e.type}" is unkown.`);return this.setNextParser("pointer",t,e)}saveOffset(t,e={}){return this.setNextParser("saveOffset",t,e)}endianness(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(t){return this.endianness(t)}useContextVars(t=!0){return this.useContextVariables=t,this}create(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this}getContext(t){let e=new Wn(t,this.useContextVariables);return e.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(e),e.pushCode(`return ${Xe+this.alias}(0).result;`)):this.addRawCode(e),e}getCode(){let t="imports";return this.getContext(t).code}addRawCode(t){t.pushCode("var offset = 0;"),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")}addAliasedCode(t){return t.pushCode(`function ${Xe+this.alias}(offset, context) {`),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t}resolveReferences(t){let e=t.getUnresolvedReferences();t.markRequested(e),e.forEach(n=>{var i;(i=de.get(n))===null||i===void 0||i.addAliasedCode(t)})}compile(){let t="imports",e=this.getContext(t);this.compiled=new Function(t,"TextDecoder",`return function (buffer, constructorFn) { ${e.code} };`)(e.imports,TextDecoder)}sizeOf(){let t=NaN;if(Object.keys(me).indexOf(this.type)>=0)t=me[this.type];else if(this.type==="string"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let e=NaN;typeof this.options.type=="string"?e=me[this.options.type]:this.options.type instanceof F&&(e=this.options.type.sizeOf()),t=this.options.length*e}else this.type==="seek"?t=this.options.length:this.type==="nest"?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t}parse(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)}setNextParser(t,e,n){let i=new F;return i.type=t,i.varName=e,i.options=n,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t);break}this.type!=="bit"&&this.generateAssert(t)}let e=t.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)}generateAssert(t){if(!this.options.assert)return;let e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let n=t.addImport(this.options.assert);t.pushCode(`if (!${n}.call(vars, ${e})) {`)}break;case"number":t.pushCode(`if (${this.options.assert} !== ${e}) {`);break;case"string":t.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${e}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}t.generateError(`"Assertion error: ${e} is " + ${JSON.stringify(this.options.assert.toString())}`),t.pushCode("}")}generateNext(t){return this.next&&(t=this.next.generate(t)),t}generateBit(t){let e=JSON.parse(JSON.stringify(this));if(e.options=this.options,e.generateAssert=this.generateAssert.bind(this),e.generateFormatter=this.generateFormatter.bind(this),e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let n=t.generateTmpVariable();t.pushCode(`var ${n} = 0;`);let i=(u=0)=>{let d=0;for(let m=u;m<t.bitFields.length;m++){let c=t.bitFields[m].options.length;if(d+c>32)break;d+=c}return d},o=u=>(u<=8?(t.pushCode(`${n} = dataView.getUint8(offset);`),u=8):u<=16?(t.pushCode(`${n} = dataView.getUint16(offset);`),u=16):u<=24?(t.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(t.pushCode(`${n} = dataView.getUint32(offset);`),u=32),t.pushCode(`offset += ${u/8};`),u),a=0,s=this.endian==="be",l=0,f=0;t.bitFields.forEach((u,d)=>{let m=u.options.length;if(m>f){if(f){let _=-1>>>32-f;t.pushCode(`${u.varName} = (${n} & 0x${_.toString(16)}) << ${m-f};`),m-=f}a=0,f=l=o(i(d)-f)}let c=s?l-a-m:a,g=-1>>>32-m;t.pushCode(`${u.varName} ${m<u.options.length?"|=":"="} ${n} >> ${c} & 0x${g.toString(16)};`),u.options.length===32&&t.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(t),u.options.formatter&&u.generateFormatter(t,u.varName,u.options.formatter),a+=m,f-=m}),t.bitFields=[]}}generateSeek(t){let e=t.generateOption(this.options.length);t.pushCode(`offset += ${e};`)}generateString(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",a='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let s=this.options.length;t.pushCode(`var ${n} = offset;`),t.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${s});`);let l=`offset - ${n} < ${s} ? offset - 1 : offset`;t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, ${l}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){let s=t.generateOption(this.options.length);t.pushCode(o?`${e} = Array.from(buffer.subarray(offset, offset + ${s}), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),t.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(t.pushCode(`var ${n} = offset;`),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset - 1), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(t.pushCode(`var ${n} = offset;`),t.pushCode("while(buffer.length > offset++);"),t.pushCode(o?`${e} = Array.from(buffer.subarray(${n}, offset), ${a}).join('');`:`${e} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&t.pushCode(`${e} = ${e}.replace(/\\x00+$/g, '')`)}generateBuffer(t){let e=t.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let n=this.options.readUntil,i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode(`var ${i} = offset;`),t.pushCode(`var ${o} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${o} = dataView.getUint8(offset);`);let a=t.addImport(n);t.pushCode(`if (${a}.call(${t.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${e} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${e} = buffer.subarray(offset);`);else{let n=t.generateOption(this.options.length);t.pushCode(`${e} = buffer.subarray(offset, offset + ${n});`),t.pushCode(`offset += ${n};`)}this.options.clone&&t.pushCode(`${e} = buffer.constructor.from(${e});`)}generateArray(t){let e=t.generateOption(this.options.length),n=t.generateOption(this.options.lengthInBytes),i=this.options.type,o=t.generateTmpVariable(),a=t.generateVariable(this.varName),s=t.generateTmpVariable(),l=this.options.key,f=typeof l=="string";if(f?t.pushCode(`${a} = {};`):t.pushCode(`${a} = [];`),typeof this.options.readUntil=="function"?t.pushCode("do {"):this.options.readUntil==="eof"?t.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):n!==void 0?t.pushCode(`for (var ${o} = offset + ${n}; offset < ${o}; ) {`):t.pushCode(`for (var ${o} = ${e}; ${o} > 0; ${o}--) {`),typeof i=="string")if(de.get(i)){let u=t.generateTmpVariable();if(t.pushCode(`var ${u} = ${Xe+i}(offset, {`),t.useContextVariables){let d=t.generateVariable();t.pushCode(`$parent: ${d},`),t.pushCode(`$root: ${d}.$root,`),!this.options.readUntil&&n===void 0&&t.pushCode(`$index: ${e} - ${o},`)}t.pushCode("});"),t.pushCode(`var ${s} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&t.addReference(i)}else{let u=Mr[i],d=Vr[i];t.pushCode(`var ${s} = dataView.get${u}(offset, ${d});`),t.pushCode(`offset += ${me[i]};`)}else if(i instanceof F){t.pushCode(`var ${s} = {};`);let u=t.generateVariable();t.pushScope(s),t.useContextVariables&&(t.pushCode(`${s}.$parent = ${u};`),t.pushCode(`${s}.$root = ${u}.$root;`),!this.options.readUntil&&n===void 0&&t.pushCode(`${s}.$index = ${e} - ${o};`)),i.generate(t),t.useContextVariables&&(t.pushCode(`delete ${s}.$parent;`),t.pushCode(`delete ${s}.$root;`),t.pushCode(`delete ${s}.$index;`)),t.popScope()}if(f?t.pushCode(`${a}[${s}.${l}] = ${s};`):t.pushCode(`${a}.push(${s});`),t.pushCode("}"),typeof this.options.readUntil=="function"){let u=this.options.readUntil,d=t.addImport(u);t.pushCode(`while (!${d}.call(${t.generateVariable()}, ${s}, buffer.subarray(offset)));`)}}generateChoiceCase(t,e,n){if(typeof n=="string"){let i=t.generateVariable(this.varName);if(de.has(n)){let o=t.generateTmpVariable();t.pushCode(`var ${o} = ${Xe+n}(offset, {`),t.useContextVariables&&(t.pushCode(`$parent: ${i}.$parent,`),t.pushCode(`$root: ${i}.$root,`)),t.pushCode("});"),t.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),n!==this.alias&&t.addReference(n)}else{let o=Mr[n],a=Vr[n];t.pushCode(`${i} = dataView.get${o}(offset, ${a});`),t.pushCode(`offset += ${me[n]}`)}}else n instanceof F&&(t.pushPath(e),n.generate(t),t.popPath(e))}generateChoice(t){let e=t.generateOption(this.options.tag),n=t.generateVariable(this.varName);if(this.varName&&(t.pushCode(`${n} = {};`),t.useContextVariables)){let i=t.generateVariable();t.pushCode(`${n}.$parent = ${i};`),t.pushCode(`${n}.$root = ${i}.$root;`)}t.pushCode(`switch(${e}) {`);for(let i in this.options.choices){let o=parseInt(i,10),a=this.options.choices[o];t.pushCode(`case ${o}:`),this.generateChoiceCase(t,this.varName,a),t.pushCode("break;")}t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError(`"Met undefined tag value " + ${e} + " at choice"`),t.pushCode("}"),this.varName&&t.useContextVariables&&(t.pushCode(`delete ${n}.$parent;`),t.pushCode(`delete ${n}.$root;`))}generateNest(t){let e=t.generateVariable(this.varName);if(this.options.type instanceof F){if(this.varName&&(t.pushCode(`${e} = {};`),t.useContextVariables)){let n=t.generateVariable();t.pushCode(`${e}.$parent = ${n};`),t.pushCode(`${e}.$root = ${n}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&t.useContextVariables&&t.useContextVariables&&(t.pushCode(`delete ${e}.$parent;`),t.pushCode(`delete ${e}.$root;`))}else if(de.has(this.options.type)){let n=t.generateTmpVariable();if(t.pushCode(`var ${n} = ${Xe+this.options.type}(offset, {`),t.useContextVariables){let i=t.generateVariable();t.pushCode(`$parent: ${i},`),t.pushCode(`$root: ${i}.$root,`)}t.pushCode("});"),t.pushCode(`${e} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}}generateWrapper(t){let e=t.generateVariable(this.varName),n=t.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,f=t.generateTmpVariable(),u=t.generateTmpVariable();t.pushCode(`var ${f} = offset;`),t.pushCode(`var ${u} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${u} = dataView.getUint8(offset);`);let d=t.addImport(l);t.pushCode(`if (${d}.call(${t.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${n} = buffer.subarray(${f}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${n} = buffer.subarray(offset);`);else{let l=t.generateOption(this.options.length);t.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),t.pushCode(`offset += ${l};`)}this.options.clone&&t.pushCode(`${n} = buffer.constructor.from(${n});`);let i=t.generateTmpVariable(),o=t.generateTmpVariable(),a=t.generateTmpVariable(),s=t.addImport(this.options.wrapper);if(t.pushCode(`${n} = ${s}.call(this, ${n}).subarray(0);`),t.pushCode(`var ${i} = buffer;`),t.pushCode(`var ${o} = offset;`),t.pushCode(`var ${a} = dataView;`),t.pushCode(`buffer = ${n};`),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof F)this.varName&&t.pushCode(`${e} = {};`),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(de.has(this.options.type)){let l=t.generateTmpVariable();t.pushCode(`var ${l} = ${Xe+this.options.type}(0);`),t.pushCode(`${e} = ${l}.result;`),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode(`buffer = ${i};`),t.pushCode(`dataView = ${a};`),t.pushCode(`offset = ${o};`)}generateFormatter(t,e,n){if(typeof n=="function"){let i=t.addImport(n);t.pushCode(`${e} = ${i}.call(${t.generateVariable()}, ${e});`)}}generatePointer(t){let e=this.options.type,n=t.generateOption(this.options.offset),i=t.generateTmpVariable(),o=t.generateVariable(this.varName);if(t.pushCode(`var ${i} = offset;`),t.pushCode(`offset = ${n};`),this.options.type instanceof F){if(t.pushCode(`${o} = {};`),t.useContextVariables){let a=t.generateVariable();t.pushCode(`${o}.$parent = ${a};`),t.pushCode(`${o}.$root = ${a}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.useContextVariables&&(t.pushCode(`delete ${o}.$parent;`),t.pushCode(`delete ${o}.$root;`))}else if(de.has(this.options.type)){let a=t.generateTmpVariable();if(t.pushCode(`var ${a} = ${Xe+this.options.type}(offset, {`),t.useContextVariables){let s=t.generateVariable();t.pushCode(`$parent: ${s},`),t.pushCode(`$root: ${s}.$root,`)}t.pushCode("});"),t.pushCode(`${o} = ${a}.result; offset = ${a}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(me).indexOf(this.options.type)>=0){let a=Mr[e],s=Vr[e];t.pushCode(`${o} = dataView.get${a}(offset, ${s});`),t.pushCode(`offset += ${me[e]};`)}t.pushCode(`offset = ${i};`)}generateSaveOffset(t){let e=t.generateVariable(this.varName);t.pushCode(`${e} = offset`)}};var of=Re(ii()),af=Re(ai());h();p();var xe=class{constructor(t){this.ranges=t}get min(){return this.ranges[0].min}get max(){return this.ranges[this.ranges.length-1].max}contains(t){for(let e of this.ranges)if(e.min<=t&&e.max>=t)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new xe([{min:t.min,max:t.max}]))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){let e=[...this.getRanges(),...t.getRanges()].sort((o,a)=>o.min<a.min?-1:o.min>a.min?1:o.max<a.max?-1:a.max>o.max?1:0),n=[],i=e[0];for(let o of e)o.min>i.max+1?(n.push(i),i=o):o.max>i.max&&(i=new xe([{min:i.min,max:o.max}]));return n.push(i),n.length===1?n[0]:new xe(n)}};h();p();h();p();function At(r){let t=r.length;for(;--t>=0;)r[t]=0}var yc=0,vs=1,Ec=2,Ac=3,Tc=258,Ii=29,nr=256,qt=nr+1+Ii,xt=30,$i=19,xs=2*qt+1,Je=15,si=16,Rc=7,Fi=256,ys=16,Es=17,As=18,xi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Kr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Cc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ts=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sc=512,$e=new Array((qt+2)*2);At($e);var jt=new Array(xt*2);At(jt);var Kt=new Array(Sc);At(Kt);var Xt=new Array(Tc-Ac+1);At(Xt);var Oi=new Array(Ii);At(Oi);var Xr=new Array(xt);At(Xr);function fi(r,t,e,n,i){this.static_tree=r,this.extra_bits=t,this.extra_base=e,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var Rs,Cs,Ss;function ui(r,t){this.dyn_tree=r,this.max_code=0,this.stat_desc=t}var ks=r=>r<256?Kt[r]:Kt[256+(r>>>7)],Jt=(r,t)=>{r.pending_buf[r.pending++]=t&255,r.pending_buf[r.pending++]=t>>>8&255},J=(r,t,e)=>{r.bi_valid>si-e?(r.bi_buf|=t<<r.bi_valid&65535,Jt(r,r.bi_buf),r.bi_buf=t>>si-r.bi_valid,r.bi_valid+=e-si):(r.bi_buf|=t<<r.bi_valid&65535,r.bi_valid+=e)},Ee=(r,t,e)=>{J(r,e[t*2],e[t*2+1])},Is=(r,t)=>{let e=0;do e|=r&1,r>>>=1,e<<=1;while(--t>0);return e>>>1},kc=r=>{r.bi_valid===16?(Jt(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},Ic=(r,t)=>{let e=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,u,d,m,c,g,_=0;for(m=0;m<=Je;m++)r.bl_count[m]=0;for(e[r.heap[r.heap_max]*2+1]=0,f=r.heap_max+1;f<xs;f++)u=r.heap[f],m=e[e[u*2+1]*2+1]+1,m>l&&(m=l,_++),e[u*2+1]=m,!(u>n)&&(r.bl_count[m]++,c=0,u>=s&&(c=a[u-s]),g=e[u*2],r.opt_len+=g*(m+c),o&&(r.static_len+=g*(i[u*2+1]+c)));if(_!==0){do{for(m=l-1;r.bl_count[m]===0;)m--;r.bl_count[m]--,r.bl_count[m+1]+=2,r.bl_count[l]--,_-=2}while(_>0);for(m=l;m!==0;m--)for(u=r.bl_count[m];u!==0;)d=r.heap[--f],!(d>n)&&(e[d*2+1]!==m&&(r.opt_len+=(m-e[d*2+1])*e[d*2],e[d*2+1]=m),u--)}},$s=(r,t,e)=>{let n=new Array(Je+1),i=0,o,a;for(o=1;o<=Je;o++)i=i+e[o-1]<<1,n[o]=i;for(a=0;a<=t;a++){let s=r[a*2+1];s!==0&&(r[a*2]=Is(n[s]++,s))}},$c=()=>{let r,t,e,n,i,o=new Array(Je+1);for(e=0,n=0;n<Ii-1;n++)for(Oi[n]=e,r=0;r<1<<xi[n];r++)Xt[e++]=n;for(Xt[e-1]=n,i=0,n=0;n<16;n++)for(Xr[n]=i,r=0;r<1<<Kr[n];r++)Kt[i++]=n;for(i>>=7;n<xt;n++)for(Xr[n]=i<<7,r=0;r<1<<Kr[n]-7;r++)Kt[256+i++]=n;for(t=0;t<=Je;t++)o[t]=0;for(r=0;r<=143;)$e[r*2+1]=8,r++,o[8]++;for(;r<=255;)$e[r*2+1]=9,r++,o[9]++;for(;r<=279;)$e[r*2+1]=7,r++,o[7]++;for(;r<=287;)$e[r*2+1]=8,r++,o[8]++;for($s($e,qt+1,o),r=0;r<xt;r++)jt[r*2+1]=5,jt[r*2]=Is(r,5);Rs=new fi($e,xi,nr+1,qt,Je),Cs=new fi(jt,Kr,0,xt,Je),Ss=new fi(new Array(0),Cc,0,$i,Rc)},Fs=r=>{let t;for(t=0;t<qt;t++)r.dyn_ltree[t*2]=0;for(t=0;t<xt;t++)r.dyn_dtree[t*2]=0;for(t=0;t<$i;t++)r.bl_tree[t*2]=0;r.dyn_ltree[Fi*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},Os=r=>{r.bi_valid>8?Jt(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},Ua=(r,t,e,n)=>{let i=t*2,o=e*2;return r[i]<r[o]||r[i]===r[o]&&n[t]<=n[e]},li=(r,t,e)=>{let n=r.heap[e],i=e<<1;for(;i<=r.heap_len&&(i<r.heap_len&&Ua(t,r.heap[i+1],r.heap[i],r.depth)&&i++,!Ua(t,n,r.heap[i],r.depth));)r.heap[e]=r.heap[i],e=i,i<<=1;r.heap[e]=n},Pa=(r,t,e)=>{let n,i,o=0,a,s;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+o++]&255,n+=(r.pending_buf[r.sym_buf+o++]&255)<<8,i=r.pending_buf[r.sym_buf+o++],n===0?Ee(r,i,t):(a=Xt[i],Ee(r,a+nr+1,t),s=xi[a],s!==0&&(i-=Oi[a],J(r,i,s)),n--,a=ks(n),Ee(r,a,e),s=Kr[a],s!==0&&(n-=Xr[a],J(r,n,s)));while(o<r.sym_next);Ee(r,Fi,t)},yi=(r,t)=>{let e=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,l=-1,f;for(r.heap_len=0,r.heap_max=xs,a=0;a<o;a++)e[a*2]!==0?(r.heap[++r.heap_len]=l=a,r.depth[a]=0):e[a*2+1]=0;for(;r.heap_len<2;)f=r.heap[++r.heap_len]=l<2?++l:0,e[f*2]=1,r.depth[f]=0,r.opt_len--,i&&(r.static_len-=n[f*2+1]);for(t.max_code=l,a=r.heap_len>>1;a>=1;a--)li(r,e,a);f=o;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],li(r,e,1),s=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=s,e[f*2]=e[a*2]+e[s*2],r.depth[f]=(r.depth[a]>=r.depth[s]?r.depth[a]:r.depth[s])+1,e[a*2+1]=e[s*2+1]=f,r.heap[1]=f++,li(r,e,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],Ic(r,t),$s(e,l,r.bl_count)},Da=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,f=4;for(a===0&&(l=138,f=3),t[(e+1)*2+1]=65535,n=0;n<=e;n++)o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)&&(s<f?r.bl_tree[o*2]+=s:o!==0?(o!==i&&r.bl_tree[o*2]++,r.bl_tree[ys*2]++):s<=10?r.bl_tree[Es*2]++:r.bl_tree[As*2]++,s=0,i=o,a===0?(l=138,f=3):o===a?(l=6,f=3):(l=7,f=4))},za=(r,t,e)=>{let n,i=-1,o,a=t[0*2+1],s=0,l=7,f=4;for(a===0&&(l=138,f=3),n=0;n<=e;n++)if(o=a,a=t[(n+1)*2+1],!(++s<l&&o===a)){if(s<f)do Ee(r,o,r.bl_tree);while(--s!==0);else o!==0?(o!==i&&(Ee(r,o,r.bl_tree),s--),Ee(r,ys,r.bl_tree),J(r,s-3,2)):s<=10?(Ee(r,Es,r.bl_tree),J(r,s-3,3)):(Ee(r,As,r.bl_tree),J(r,s-11,7));s=0,i=o,a===0?(l=138,f=3):o===a?(l=6,f=3):(l=7,f=4)}},Fc=r=>{let t;for(Da(r,r.dyn_ltree,r.l_desc.max_code),Da(r,r.dyn_dtree,r.d_desc.max_code),yi(r,r.bl_desc),t=$i-1;t>=3&&r.bl_tree[Ts[t]*2+1]===0;t--);return r.opt_len+=3*(t+1)+5+5+4,t},Oc=(r,t,e,n)=>{let i;for(J(r,t-257,5),J(r,e-1,5),J(r,n-4,4),i=0;i<n;i++)J(r,r.bl_tree[Ts[i]*2+1],3);za(r,r.dyn_ltree,t-1),za(r,r.dyn_dtree,e-1)},Nc=r=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&r.dyn_ltree[e*2]!==0)return 0;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return 1;for(e=32;e<nr;e++)if(r.dyn_ltree[e*2]!==0)return 1;return 0},La=!1,Bc=r=>{La||($c(),La=!0),r.l_desc=new ui(r.dyn_ltree,Rs),r.d_desc=new ui(r.dyn_dtree,Cs),r.bl_desc=new ui(r.bl_tree,Ss),r.bi_buf=0,r.bi_valid=0,Fs(r)},Ns=(r,t,e,n)=>{J(r,(yc<<1)+(n?1:0),3),Os(r),Jt(r,e),Jt(r,~e),e&&r.pending_buf.set(r.window.subarray(t,t+e),r.pending),r.pending+=e},Uc=r=>{J(r,vs<<1,3),Ee(r,Fi,$e),kc(r)},Pc=(r,t,e,n)=>{let i,o,a=0;r.level>0?(r.strm.data_type===2&&(r.strm.data_type=Nc(r)),yi(r,r.l_desc),yi(r,r.d_desc),a=Fc(r),i=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=i&&(i=o)):i=o=e+5,e+4<=i&&t!==-1?Ns(r,t,e,n):r.strategy===4||o===i?(J(r,(vs<<1)+(n?1:0),3),Pa(r,$e,jt)):(J(r,(Ec<<1)+(n?1:0),3),Oc(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),Pa(r,r.dyn_ltree,r.dyn_dtree)),Fs(r),n&&Os(r)},Dc=(r,t,e)=>(r.pending_buf[r.sym_buf+r.sym_next++]=t,r.pending_buf[r.sym_buf+r.sym_next++]=t>>8,r.pending_buf[r.sym_buf+r.sym_next++]=e,t===0?r.dyn_ltree[e*2]++:(r.matches++,t--,r.dyn_ltree[(Xt[e]+nr+1)*2]++,r.dyn_dtree[ks(t)*2]++),r.sym_next===r.sym_end),zc=Bc,Lc=Ns,Mc=Pc,Vc=Dc,Yc=Uc,Zc={_tr_init:zc,_tr_stored_block:Lc,_tr_flush_block:Mc,_tr_tally:Vc,_tr_align:Yc},Hc=(r,t,e,n)=>{let i=r&65535|0,o=r>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},Qt=Hc,jc=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},Wc=new Uint32Array(jc()),Gc=(r,t,e,n)=>{let i=Wc,o=n+e;r^=-1;for(let a=n;a<o;a++)r=r>>>8^i[(r^t[a])&255];return r^-1},V=Gc,tt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:qc,_tr_stored_block:Ei,_tr_flush_block:Kc,_tr_tally:Ye,_tr_align:Xc}=Zc,{Z_NO_FLUSH:Ze,Z_PARTIAL_FLUSH:Jc,Z_FULL_FLUSH:Qc,Z_FINISH:se,Z_BLOCK:Ma,Z_OK:Z,Z_STREAM_END:Va,Z_STREAM_ERROR:Ae,Z_DATA_ERROR:eh,Z_BUF_ERROR:ci,Z_DEFAULT_COMPRESSION:th,Z_FILTERED:rh,Z_HUFFMAN_ONLY:Hr,Z_RLE:nh,Z_FIXED:ih,Z_DEFAULT_STRATEGY:oh,Z_UNKNOWN:ah,Z_DEFLATED:en}=Tt,sh=9,fh=15,uh=8,lh=29,ch=256,Ai=ch+1+lh,hh=30,ph=19,dh=2*Ai+1,mh=15,N=3,Ve=258,Te=Ve+N+1,wh=32,yt=42,Ni=57,Ti=69,Ri=73,Ci=91,Si=103,Qe=113,Zt=666,q=1,Rt=2,rt=3,Ct=4,gh=3,et=(r,t)=>(r.msg=tt[t],t),Ya=r=>r*2-(r>4?9:0),Me=r=>{let t=r.length;for(;--t>=0;)r[t]=0},_h=r=>{let t,e,n,i=r.w_size;t=r.hash_size,n=t;do e=r.head[--n],r.head[n]=e>=i?e-i:0;while(--t);t=i,n=t;do e=r.prev[--n],r.prev[n]=e>=i?e-i:0;while(--t)},bh=(r,t,e)=>(t<<r.hash_shift^e)&r.hash_mask,He=bh,te=r=>{let t=r.state,e=t.pending;e>r.avail_out&&(e=r.avail_out),e!==0&&(r.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),r.next_out),r.next_out+=e,t.pending_out+=e,r.total_out+=e,r.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},re=(r,t)=>{Kc(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,t),r.block_start=r.strstart,te(r.strm)},U=(r,t)=>{r.pending_buf[r.pending++]=t},Yt=(r,t)=>{r.pending_buf[r.pending++]=t>>>8&255,r.pending_buf[r.pending++]=t&255},ki=(r,t,e,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,t.set(r.input.subarray(r.next_in,r.next_in+i),e),r.state.wrap===1?r.adler=Qt(r.adler,t,i,e):r.state.wrap===2&&(r.adler=V(r.adler,t,i,e)),r.next_in+=i,r.total_in+=i,i)},Bs=(r,t)=>{let e=r.max_chain_length,n=r.strstart,i,o,a=r.prev_length,s=r.nice_match,l=r.strstart>r.w_size-Te?r.strstart-(r.w_size-Te):0,f=r.window,u=r.w_mask,d=r.prev,m=r.strstart+Ve,c=f[n+a-1],g=f[n+a];r.prev_length>=r.good_match&&(e>>=2),s>r.lookahead&&(s=r.lookahead);do if(i=t,!(f[i+a]!==g||f[i+a-1]!==c||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<m);if(o=Ve-(m-n),n=m-Ve,o>a){if(r.match_start=t,a=o,o>=s)break;c=f[n+a-1],g=f[n+a]}}while((t=d[t&u])>l&&--e!==0);return a<=r.lookahead?a:r.lookahead},Et=r=>{let t=r.w_size,e,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=t+(t-Te)&&(r.window.set(r.window.subarray(t,t+t-n),0),r.match_start-=t,r.strstart-=t,r.block_start-=t,r.insert>r.strstart&&(r.insert=r.strstart),_h(r),n+=t),r.strm.avail_in===0)break;if(e=ki(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=e,r.lookahead+r.insert>=N)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=He(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=He(r,r.ins_h,r.window[i+N-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<N)););}while(r.lookahead<Te&&r.strm.avail_in!==0)},Us=(r,t)=>{let e=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,o,a=0,s=r.strm.avail_in;do{if(n=65535,o=r.bi_valid+42>>3,r.strm.avail_out<o||(o=r.strm.avail_out-o,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>o&&(n=o),n<e&&(n===0&&t!==se||t===Ze||n!==i+r.strm.avail_in)))break;a=t===se&&n===i+r.strm.avail_in?1:0,Ei(r,0,0,a),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,te(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&(ki(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(a===0);return s-=r.strm.avail_in,s&&(s>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=s&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-s,r.strm.next_in),r.strstart),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),a?Ct:t!==Ze&&t!==se&&r.strm.avail_in===0&&r.strstart===r.block_start?Rt:(o=r.window_size-r.strstart,r.strm.avail_in>o&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,o+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),o>r.strm.avail_in&&(o=r.strm.avail_in),o&&(ki(r.strm,r.window,r.strstart,o),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.high_water<r.strstart&&(r.high_water=r.strstart),o=r.bi_valid+42>>3,o=r.pending_buf_size-o>65535?65535:r.pending_buf_size-o,e=o>r.w_size?r.w_size:o,i=r.strstart-r.block_start,(i>=e||(i||t===se)&&t!==Ze&&r.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,a=t===se&&r.strm.avail_in===0&&n===i?1:0,Ei(r,r.block_start,n,a),r.block_start+=n,te(r.strm)),a?rt:q)},hi=(r,t)=>{let e,n;for(;;){if(r.lookahead<Te){if(Et(r),r.lookahead<Te&&t===Ze)return q;if(r.lookahead===0)break}if(e=0,r.lookahead>=N&&(r.ins_h=He(r,r.ins_h,r.window[r.strstart+N-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),e!==0&&r.strstart-e<=r.w_size-Te&&(r.match_length=Bs(r,e)),r.match_length>=N)if(n=Ye(r,r.strstart-r.match_start,r.match_length-N),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=N){r.match_length--;do r.strstart++,r.ins_h=He(r,r.ins_h,r.window[r.strstart+N-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=He(r,r.ins_h,r.window[r.strstart+1]);else n=Ye(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(re(r,!1),r.strm.avail_out===0))return q}return r.insert=r.strstart<N-1?r.strstart:N-1,t===se?(re(r,!0),r.strm.avail_out===0?rt:Ct):r.sym_next&&(re(r,!1),r.strm.avail_out===0)?q:Rt},bt=(r,t)=>{let e,n,i;for(;;){if(r.lookahead<Te){if(Et(r),r.lookahead<Te&&t===Ze)return q;if(r.lookahead===0)break}if(e=0,r.lookahead>=N&&(r.ins_h=He(r,r.ins_h,r.window[r.strstart+N-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=N-1,e!==0&&r.prev_length<r.max_lazy_match&&r.strstart-e<=r.w_size-Te&&(r.match_length=Bs(r,e),r.match_length<=5&&(r.strategy===rh||r.match_length===N&&r.strstart-r.match_start>4096)&&(r.match_length=N-1)),r.prev_length>=N&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-N,n=Ye(r,r.strstart-1-r.prev_match,r.prev_length-N),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=He(r,r.ins_h,r.window[r.strstart+N-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=N-1,r.strstart++,n&&(re(r,!1),r.strm.avail_out===0))return q}else if(r.match_available){if(n=Ye(r,0,r.window[r.strstart-1]),n&&re(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return q}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=Ye(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<N-1?r.strstart:N-1,t===se?(re(r,!0),r.strm.avail_out===0?rt:Ct):r.sym_next&&(re(r,!1),r.strm.avail_out===0)?q:Rt},vh=(r,t)=>{let e,n,i,o,a=r.window;for(;;){if(r.lookahead<=Ve){if(Et(r),r.lookahead<=Ve&&t===Ze)return q;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=N&&r.strstart>0&&(i=r.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=r.strstart+Ve;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);r.match_length=Ve-(o-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=N?(e=Ye(r,1,r.match_length-N),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(e=Ye(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),e&&(re(r,!1),r.strm.avail_out===0))return q}return r.insert=0,t===se?(re(r,!0),r.strm.avail_out===0?rt:Ct):r.sym_next&&(re(r,!1),r.strm.avail_out===0)?q:Rt},xh=(r,t)=>{let e;for(;;){if(r.lookahead===0&&(Et(r),r.lookahead===0)){if(t===Ze)return q;break}if(r.match_length=0,e=Ye(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,e&&(re(r,!1),r.strm.avail_out===0))return q}return r.insert=0,t===se?(re(r,!0),r.strm.avail_out===0?rt:Ct):r.sym_next&&(re(r,!1),r.strm.avail_out===0)?q:Rt};function ye(r,t,e,n,i){this.good_length=r,this.max_lazy=t,this.nice_length=e,this.max_chain=n,this.func=i}var Ht=[new ye(0,0,0,0,Us),new ye(4,4,8,4,hi),new ye(4,5,16,8,hi),new ye(4,6,32,32,hi),new ye(4,4,16,16,bt),new ye(8,16,32,32,bt),new ye(8,16,128,128,bt),new ye(8,32,128,256,bt),new ye(32,128,258,1024,bt),new ye(32,258,258,4096,bt)],yh=r=>{r.window_size=2*r.w_size,Me(r.head),r.max_lazy_match=Ht[r.level].max_lazy,r.good_match=Ht[r.level].good_length,r.nice_match=Ht[r.level].nice_length,r.max_chain_length=Ht[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=N-1,r.match_available=0,r.ins_h=0};function Eh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=en,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(dh*2),this.dyn_dtree=new Uint16Array((2*hh+1)*2),this.bl_tree=new Uint16Array((2*ph+1)*2),Me(this.dyn_ltree),Me(this.dyn_dtree),Me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mh+1),this.heap=new Uint16Array(2*Ai+1),Me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ai+1),Me(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ir=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.status!==yt&&t.status!==Ni&&t.status!==Ti&&t.status!==Ri&&t.status!==Ci&&t.status!==Si&&t.status!==Qe&&t.status!==Zt?1:0},Ps=r=>{if(ir(r))return et(r,Ae);r.total_in=r.total_out=0,r.data_type=ah;let t=r.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Ni:t.wrap?yt:Qe,r.adler=t.wrap===2?0:1,t.last_flush=-2,qc(t),Z},Ds=r=>{let t=Ps(r);return t===Z&&yh(r.state),t},Ah=(r,t)=>ir(r)||r.state.wrap!==2?Ae:(r.state.gzhead=t,Z),zs=(r,t,e,n,i,o)=>{if(!r)return Ae;let a=1;if(t===th&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>sh||e!==en||n<8||n>15||t<0||t>9||o<0||o>ih||n===8&&a!==1)return et(r,Ae);n===8&&(n=9);let s=new Eh;return r.state=s,s.strm=r,s.status=yt,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+N-1)/N),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=e,Ds(r)},Th=(r,t)=>zs(r,t,en,fh,uh,oh),Rh=(r,t)=>{if(ir(r)||t>Ma||t<0)return r?et(r,Ae):Ae;let e=r.state;if(!r.output||r.avail_in!==0&&!r.input||e.status===Zt&&t!==se)return et(r,r.avail_out===0?ci:Ae);let n=e.last_flush;if(e.last_flush=t,e.pending!==0){if(te(r),r.avail_out===0)return e.last_flush=-1,Z}else if(r.avail_in===0&&Ya(t)<=Ya(n)&&t!==se)return et(r,ci);if(e.status===Zt&&r.avail_in!==0)return et(r,ci);if(e.status===yt&&e.wrap===0&&(e.status=Qe),e.status===yt){let i=en+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=Hr||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,i|=o<<6,e.strstart!==0&&(i|=wh),i+=31-i%31,Yt(e,i),e.strstart!==0&&(Yt(e,r.adler>>>16),Yt(e,r.adler&65535)),r.adler=1,e.status=Qe,te(r),e.pending!==0)return e.last_flush=-1,Z}if(e.status===Ni){if(r.adler=0,U(e,31),U(e,139),U(e,8),e.gzhead)U(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),U(e,e.gzhead.time&255),U(e,e.gzhead.time>>8&255),U(e,e.gzhead.time>>16&255),U(e,e.gzhead.time>>24&255),U(e,e.level===9?2:e.strategy>=Hr||e.level<2?4:0),U(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(U(e,e.gzhead.extra.length&255),U(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(r.adler=V(r.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=Ti;else if(U(e,0),U(e,0),U(e,0),U(e,0),U(e,0),U(e,e.level===9?2:e.strategy>=Hr||e.level<2?4:0),U(e,gh),e.status=Qe,te(r),e.pending!==0)return e.last_flush=-1,Z}if(e.status===Ti){if(e.gzhead.extra){let i=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=s,te(r),e.pending!==0)return e.last_flush=-1,Z;i=0,o-=s}let a=new Uint8Array(e.gzhead.extra);e.pending_buf.set(a.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Ri}if(e.status===Ri){if(e.gzhead.name){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i)),te(r),e.pending!==0)return e.last_flush=-1,Z;i=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,U(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Ci}if(e.status===Ci){if(e.gzhead.comment){let i=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i)),te(r),e.pending!==0)return e.last_flush=-1,Z;i=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,U(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>i&&(r.adler=V(r.adler,e.pending_buf,e.pending-i,i))}e.status=Si}if(e.status===Si){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(te(r),e.pending!==0))return e.last_flush=-1,Z;U(e,r.adler&255),U(e,r.adler>>8&255),r.adler=0}if(e.status=Qe,te(r),e.pending!==0)return e.last_flush=-1,Z}if(r.avail_in!==0||e.lookahead!==0||t!==Ze&&e.status!==Zt){let i=e.level===0?Us(e,t):e.strategy===Hr?xh(e,t):e.strategy===nh?vh(e,t):Ht[e.level].func(e,t);if((i===rt||i===Ct)&&(e.status=Zt),i===q||i===rt)return r.avail_out===0&&(e.last_flush=-1),Z;if(i===Rt&&(t===Jc?Xc(e):t!==Ma&&(Ei(e,0,0,!1),t===Qc&&(Me(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),te(r),r.avail_out===0))return e.last_flush=-1,Z}return t!==se?Z:e.wrap<=0?Va:(e.wrap===2?(U(e,r.adler&255),U(e,r.adler>>8&255),U(e,r.adler>>16&255),U(e,r.adler>>24&255),U(e,r.total_in&255),U(e,r.total_in>>8&255),U(e,r.total_in>>16&255),U(e,r.total_in>>24&255)):(Yt(e,r.adler>>>16),Yt(e,r.adler&65535)),te(r),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Z:Va)},Ch=r=>{if(ir(r))return Ae;let t=r.state.status;return r.state=null,t===Qe?et(r,eh):Z},Sh=(r,t)=>{let e=t.length;if(ir(r))return Ae;let n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==yt||n.lookahead)return Ae;if(i===1&&(r.adler=Qt(r.adler,t,e,0)),n.wrap=0,e>=n.w_size){i===0&&(Me(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(e-n.w_size,e),0),t=l,e=n.w_size}let o=r.avail_in,a=r.next_in,s=r.input;for(r.avail_in=e,r.next_in=0,r.input=t,Et(n);n.lookahead>=N;){let l=n.strstart,f=n.lookahead-(N-1);do n.ins_h=He(n,n.ins_h,n.window[l+N-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--f);n.strstart=l,n.lookahead=N-1,Et(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=N-1,n.match_available=0,r.next_in=a,r.input=s,r.avail_in=o,n.wrap=i,Z},kh=Th,Ih=zs,$h=Ds,Fh=Ps,Oh=Ah,Nh=Rh,Bh=Ch,Uh=Sh,Ph="pako deflate (from Nodeca project)",Wt={deflateInit:kh,deflateInit2:Ih,deflateReset:$h,deflateResetKeep:Fh,deflateSetHeader:Oh,deflate:Nh,deflateEnd:Bh,deflateSetDictionary:Uh,deflateInfo:Ph},Dh=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),zh=function(r){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let n in e)Dh(e,n)&&(r[n]=e[n])}}return r},Lh=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;let e=new Uint8Array(t);for(let n=0,i=0,o=r.length;n<o;n++){let a=r[n];e.set(a,i),i+=a.length}return e},tn={assign:zh,flattenChunks:Lh},Ls=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){Ls=!1}var er=new Uint8Array(256);for(let r=0;r<256;r++)er[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;er[254]=er[254]=1;var Mh=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,o,a=r.length,s=0;for(i=0;i<a;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t},Vh=(r,t)=>{if(t<65534&&r.subarray&&Ls)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e},Yh=(r,t)=>{let e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i,o=new Array(e*2);for(i=0,n=0;n<e;){let a=r[n++];if(a<128){o[i++]=a;continue}let s=er[a];if(s>4){o[i++]=65533,n+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&n<e;)a=a<<6|r[n++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return Vh(o,i)},Zh=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+er[r[e]]>t?e:t},tr={string2buf:Mh,buf2string:Yh,utf8border:Zh};function Hh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ms=Hh,Vs=Object.prototype.toString,{Z_NO_FLUSH:jh,Z_SYNC_FLUSH:Wh,Z_FULL_FLUSH:Gh,Z_FINISH:qh,Z_OK:Jr,Z_STREAM_END:Kh,Z_DEFAULT_COMPRESSION:Xh,Z_DEFAULT_STRATEGY:Jh,Z_DEFLATED:Qh}=Tt;function or(r){this.options=tn.assign({level:Xh,method:Qh,chunkSize:16384,windowBits:15,memLevel:8,strategy:Jh},r||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ms,this.strm.avail_out=0;let e=Wt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Jr)throw new Error(tt[e]);if(t.header&&Wt.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=tr.string2buf(t.dictionary):Vs.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,e=Wt.deflateSetDictionary(this.strm,n),e!==Jr)throw new Error(tt[e]);this._dict_set=!0}}or.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?qh:jh,typeof r=="string"?e.input=tr.string2buf(r):Vs.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),(o===Wh||o===Gh)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=Wt.deflate(e,o),i===Kh)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Wt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Jr;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};or.prototype.onData=function(r){this.chunks.push(r)};or.prototype.onEnd=function(r){r===Jr&&(this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Bi(r,t){let e=new or(t);if(e.push(r,!0),e.err)throw e.msg||tt[e.err];return e.result}function ep(r,t){return t=t||{},t.raw=!0,Bi(r,t)}function tp(r,t){return t=t||{},t.gzip=!0,Bi(r,t)}var rp=or,np=Bi,ip=ep,op=tp,ap=Tt,sp={Deflate:rp,deflate:np,deflateRaw:ip,gzip:op,constants:ap},jr=16209,fp=16191,up=function(t,e){let n,i,o,a,s,l,f,u,d,m,c,g,_,A,y,R,T,x,S,I,E,C,k,$,O=t.state;n=t.next_in,k=t.input,i=n+(t.avail_in-5),o=t.next_out,$=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=O.dmax,f=O.wsize,u=O.whave,d=O.wnext,m=O.window,c=O.hold,g=O.bits,_=O.lencode,A=O.distcode,y=(1<<O.lenbits)-1,R=(1<<O.distbits)-1;e:do{g<15&&(c+=k[n++]<<g,g+=8,c+=k[n++]<<g,g+=8),T=_[c&y];t:for(;;){if(x=T>>>24,c>>>=x,g-=x,x=T>>>16&255,x===0)$[o++]=T&65535;else if(x&16){S=T&65535,x&=15,x&&(g<x&&(c+=k[n++]<<g,g+=8),S+=c&(1<<x)-1,c>>>=x,g-=x),g<15&&(c+=k[n++]<<g,g+=8,c+=k[n++]<<g,g+=8),T=A[c&R];r:for(;;){if(x=T>>>24,c>>>=x,g-=x,x=T>>>16&255,x&16){if(I=T&65535,x&=15,g<x&&(c+=k[n++]<<g,g+=8,g<x&&(c+=k[n++]<<g,g+=8)),I+=c&(1<<x)-1,I>l){t.msg="invalid distance too far back",O.mode=jr;break e}if(c>>>=x,g-=x,x=o-a,I>x){if(x=I-x,x>u&&O.sane){t.msg="invalid distance too far back",O.mode=jr;break e}if(E=0,C=m,d===0){if(E+=f-x,x<S){S-=x;do $[o++]=m[E++];while(--x);E=o-I,C=$}}else if(d<x){if(E+=f+d-x,x-=d,x<S){S-=x;do $[o++]=m[E++];while(--x);if(E=0,d<S){x=d,S-=x;do $[o++]=m[E++];while(--x);E=o-I,C=$}}}else if(E+=d-x,x<S){S-=x;do $[o++]=m[E++];while(--x);E=o-I,C=$}for(;S>2;)$[o++]=C[E++],$[o++]=C[E++],$[o++]=C[E++],S-=3;S&&($[o++]=C[E++],S>1&&($[o++]=C[E++]))}else{E=o-I;do $[o++]=$[E++],$[o++]=$[E++],$[o++]=$[E++],S-=3;while(S>2);S&&($[o++]=$[E++],S>1&&($[o++]=$[E++]))}}else if((x&64)===0){T=A[(T&65535)+(c&(1<<x)-1)];continue r}else{t.msg="invalid distance code",O.mode=jr;break e}break}}else if((x&64)===0){T=_[(T&65535)+(c&(1<<x)-1)];continue t}else if(x&32){O.mode=fp;break e}else{t.msg="invalid literal/length code",O.mode=jr;break e}break}}while(n<i&&o<s);S=g>>3,n-=S,g-=S<<3,c&=(1<<g)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<s?257+(s-o):257-(o-s),O.hold=c,O.bits=g},vt=15,Za=852,Ha=592,ja=0,pi=1,Wa=2,lp=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cp=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hp=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pp=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dp=(r,t,e,n,i,o,a,s)=>{let l=s.bits,f=0,u=0,d=0,m=0,c=0,g=0,_=0,A=0,y=0,R=0,T,x,S,I,E,C=null,k,$=new Uint16Array(vt+1),O=new Uint16Array(vt+1),he=null,pt,Ne,Be;for(f=0;f<=vt;f++)$[f]=0;for(u=0;u<n;u++)$[t[e+u]]++;for(c=l,m=vt;m>=1&&$[m]===0;m--);if(c>m&&(c=m),m===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<m&&$[d]===0;d++);for(c<d&&(c=d),A=1,f=1;f<=vt;f++)if(A<<=1,A-=$[f],A<0)return-1;if(A>0&&(r===ja||m!==1))return-1;for(O[1]=0,f=1;f<vt;f++)O[f+1]=O[f]+$[f];for(u=0;u<n;u++)t[e+u]!==0&&(a[O[t[e+u]]++]=u);if(r===ja?(C=he=a,k=20):r===pi?(C=lp,he=cp,k=257):(C=hp,he=pp,k=0),R=0,u=0,f=d,E=o,g=c,_=0,S=-1,y=1<<c,I=y-1,r===pi&&y>Za||r===Wa&&y>Ha)return 1;for(;;){pt=f-_,a[u]+1<k?(Ne=0,Be=a[u]):a[u]>=k?(Ne=he[a[u]-k],Be=C[a[u]-k]):(Ne=32+64,Be=0),T=1<<f-_,x=1<<g,d=x;do x-=T,i[E+(R>>_)+x]=pt<<24|Ne<<16|Be|0;while(x!==0);for(T=1<<f-1;R&T;)T>>=1;if(T!==0?(R&=T-1,R+=T):R=0,u++,--$[f]===0){if(f===m)break;f=t[e+a[u]]}if(f>c&&(R&I)!==S){for(_===0&&(_=c),E+=d,g=f-_,A=1<<g;g+_<m&&(A-=$[g+_],!(A<=0));)g++,A<<=1;if(y+=1<<g,r===pi&&y>Za||r===Wa&&y>Ha)return 1;S=R&I,i[S]=c<<24|g<<16|E-o|0}}return R!==0&&(i[E+R]=f-_<<24|64<<16|0),s.bits=c,0},Gt=dp,mp=0,Ys=1,Zs=2,{Z_FINISH:Ga,Z_BLOCK:wp,Z_TREES:Wr,Z_OK:nt,Z_STREAM_END:gp,Z_NEED_DICT:_p,Z_STREAM_ERROR:fe,Z_DATA_ERROR:Hs,Z_MEM_ERROR:js,Z_BUF_ERROR:bp,Z_DEFLATED:qa}=Tt,rn=16180,Ka=16181,Xa=16182,Ja=16183,Qa=16184,es=16185,ts=16186,rs=16187,ns=16188,is=16189,Qr=16190,Ie=16191,di=16192,os=16193,mi=16194,as=16195,ss=16196,fs=16197,us=16198,Gr=16199,qr=16200,ls=16201,cs=16202,hs=16203,ps=16204,ds=16205,wi=16206,ms=16207,ws=16208,P=16209,Ws=16210,Gs=16211,vp=852,xp=592,yp=15,Ep=yp,gs=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Ap(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var it=r=>{if(!r)return 1;let t=r.state;return!t||t.strm!==r||t.mode<rn||t.mode>Gs?1:0},qs=r=>{if(it(r))return fe;let t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=rn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(vp),t.distcode=t.distdyn=new Int32Array(xp),t.sane=1,t.back=-1,nt},Ks=r=>{if(it(r))return fe;let t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,qs(r)},Xs=(r,t)=>{let e;if(it(r))return fe;let n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?fe:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Ks(r))},Js=(r,t)=>{if(!r)return fe;let e=new Ap;r.state=e,e.strm=r,e.window=null,e.mode=rn;let n=Xs(r,t);return n!==nt&&(r.state=null),n},Tp=r=>Js(r,Ep),_s=!0,gi,_i,Rp=r=>{if(_s){gi=new Int32Array(512),_i=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Gt(Ys,r.lens,0,288,gi,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Gt(Zs,r.lens,0,32,_i,0,r.work,{bits:5}),_s=!1}r.lencode=gi,r.lenbits=9,r.distcode=_i,r.distbits=5},Qs=(r,t,e,n)=>{let i,o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(e-n,e-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(e-n,e),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Cp=(r,t)=>{let e,n,i,o,a,s,l,f,u,d,m,c,g,_,A=0,y,R,T,x,S,I,E,C,k=new Uint8Array(4),$,O,he=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(it(r)||!r.output||!r.input&&r.avail_in!==0)return fe;e=r.state,e.mode===Ie&&(e.mode=di),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,f=e.hold,u=e.bits,d=s,m=l,C=nt;e:for(;;)switch(e.mode){case rn:if(e.wrap===0){e.mode=di;break}for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&2&&f===35615){e.wbits===0&&(e.wbits=15),e.check=0,k[0]=f&255,k[1]=f>>>8&255,e.check=V(e.check,k,2,0),f=0,u=0,e.mode=Ka;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((f&255)<<8)+(f>>8))%31){r.msg="incorrect header check",e.mode=P;break}if((f&15)!==qa){r.msg="unknown compression method",e.mode=P;break}if(f>>>=4,u-=4,E=(f&15)+8,e.wbits===0&&(e.wbits=E),E>15||E>e.wbits){r.msg="invalid window size",e.mode=P;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=f&512?is:Ie,f=0,u=0;break;case Ka:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.flags=f,(e.flags&255)!==qa){r.msg="unknown compression method",e.mode=P;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=P;break}e.head&&(e.head.text=f>>8&1),e.flags&512&&e.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,e.check=V(e.check,k,2,0)),f=0,u=0,e.mode=Xa;case Xa:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.head&&(e.head.time=f),e.flags&512&&e.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,e.check=V(e.check,k,4,0)),f=0,u=0,e.mode=Ja;case Ja:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.head&&(e.head.xflags=f&255,e.head.os=f>>8),e.flags&512&&e.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,e.check=V(e.check,k,2,0)),f=0,u=0,e.mode=Qa;case Qa:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.length=f,e.head&&(e.head.extra_len=f),e.flags&512&&e.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,e.check=V(e.check,k,2,0)),f=0,u=0}else e.head&&(e.head.extra=null);e.mode=es;case es:if(e.flags&1024&&(c=e.length,c>s&&(c=s),c&&(e.head&&(E=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(o,o+c),E)),e.flags&512&&e.wrap&4&&(e.check=V(e.check,n,c,o)),s-=c,o+=c,e.length-=c),e.length))break e;e.length=0,e.mode=ts;case ts:if(e.flags&2048){if(s===0)break e;c=0;do E=n[o+c++],e.head&&E&&e.length<65536&&(e.head.name+=String.fromCharCode(E));while(E&&c<s);if(e.flags&512&&e.wrap&4&&(e.check=V(e.check,n,c,o)),s-=c,o+=c,E)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=rs;case rs:if(e.flags&4096){if(s===0)break e;c=0;do E=n[o+c++],e.head&&E&&e.length<65536&&(e.head.comment+=String.fromCharCode(E));while(E&&c<s);if(e.flags&512&&e.wrap&4&&(e.check=V(e.check,n,c,o)),s-=c,o+=c,E)break e}else e.head&&(e.head.comment=null);e.mode=ns;case ns:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&4&&f!==(e.check&65535)){r.msg="header crc mismatch",e.mode=P;break}f=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Ie;break;case is:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}r.adler=e.check=gs(f),f=0,u=0,e.mode=Qr;case Qr:if(e.havedict===0)return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,_p;r.adler=e.check=1,e.mode=Ie;case Ie:if(t===wp||t===Wr)break e;case di:if(e.last){f>>>=u&7,u-=u&7,e.mode=wi;break}for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}switch(e.last=f&1,f>>>=1,u-=1,f&3){case 0:e.mode=os;break;case 1:if(Rp(e),e.mode=Gr,t===Wr){f>>>=2,u-=2;break e}break;case 2:e.mode=ss;break;case 3:r.msg="invalid block type",e.mode=P}f>>>=2,u-=2;break;case os:for(f>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){r.msg="invalid stored block lengths",e.mode=P;break}if(e.length=f&65535,f=0,u=0,e.mode=mi,t===Wr)break e;case mi:e.mode=as;case as:if(c=e.length,c){if(c>s&&(c=s),c>l&&(c=l),c===0)break e;i.set(n.subarray(o,o+c),a),s-=c,o+=c,l-=c,a+=c,e.length-=c;break}e.mode=Ie;break;case ss:for(;u<14;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.nlen=(f&31)+257,f>>>=5,u-=5,e.ndist=(f&31)+1,f>>>=5,u-=5,e.ncode=(f&15)+4,f>>>=4,u-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=P;break}e.have=0,e.mode=fs;case fs:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.lens[he[e.have++]]=f&7,f>>>=3,u-=3}for(;e.have<19;)e.lens[he[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,$={bits:e.lenbits},C=Gt(mp,e.lens,0,19,e.lencode,0,e.work,$),e.lenbits=$.bits,C){r.msg="invalid code lengths set",e.mode=P;break}e.have=0,e.mode=us;case us:for(;e.have<e.nlen+e.ndist;){for(;A=e.lencode[f&(1<<e.lenbits)-1],y=A>>>24,R=A>>>16&255,T=A&65535,!(y<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(T<16)f>>>=y,u-=y,e.lens[e.have++]=T;else{if(T===16){for(O=y+2;u<O;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f>>>=y,u-=y,e.have===0){r.msg="invalid bit length repeat",e.mode=P;break}E=e.lens[e.have-1],c=3+(f&3),f>>>=2,u-=2}else if(T===17){for(O=y+3;u<O;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=y,u-=y,E=0,c=3+(f&7),f>>>=3,u-=3}else{for(O=y+7;u<O;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=y,u-=y,E=0,c=11+(f&127),f>>>=7,u-=7}if(e.have+c>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=P;break}for(;c--;)e.lens[e.have++]=E}}if(e.mode===P)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=P;break}if(e.lenbits=9,$={bits:e.lenbits},C=Gt(Ys,e.lens,0,e.nlen,e.lencode,0,e.work,$),e.lenbits=$.bits,C){r.msg="invalid literal/lengths set",e.mode=P;break}if(e.distbits=6,e.distcode=e.distdyn,$={bits:e.distbits},C=Gt(Zs,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,$),e.distbits=$.bits,C){r.msg="invalid distances set",e.mode=P;break}if(e.mode=Gr,t===Wr)break e;case Gr:e.mode=qr;case qr:if(s>=6&&l>=258){r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,up(r,m),a=r.next_out,i=r.output,l=r.avail_out,o=r.next_in,n=r.input,s=r.avail_in,f=e.hold,u=e.bits,e.mode===Ie&&(e.back=-1);break}for(e.back=0;A=e.lencode[f&(1<<e.lenbits)-1],y=A>>>24,R=A>>>16&255,T=A&65535,!(y<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(R&&(R&240)===0){for(x=y,S=R,I=T;A=e.lencode[I+((f&(1<<x+S)-1)>>x)],y=A>>>24,R=A>>>16&255,T=A&65535,!(x+y<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=x,u-=x,e.back+=x}if(f>>>=y,u-=y,e.back+=y,e.length=T,R===0){e.mode=ds;break}if(R&32){e.back=-1,e.mode=Ie;break}if(R&64){r.msg="invalid literal/length code",e.mode=P;break}e.extra=R&15,e.mode=ls;case ls:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.length+=f&(1<<e.extra)-1,f>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=cs;case cs:for(;A=e.distcode[f&(1<<e.distbits)-1],y=A>>>24,R=A>>>16&255,T=A&65535,!(y<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((R&240)===0){for(x=y,S=R,I=T;A=e.distcode[I+((f&(1<<x+S)-1)>>x)],y=A>>>24,R=A>>>16&255,T=A&65535,!(x+y<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=x,u-=x,e.back+=x}if(f>>>=y,u-=y,e.back+=y,R&64){r.msg="invalid distance code",e.mode=P;break}e.offset=T,e.extra=R&15,e.mode=hs;case hs:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.offset+=f&(1<<e.extra)-1,f>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=P;break}e.mode=ps;case ps:if(l===0)break e;if(c=m-l,e.offset>c){if(c=e.offset-c,c>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=P;break}c>e.wnext?(c-=e.wnext,g=e.wsize-c):g=e.wnext-c,c>e.length&&(c=e.length),_=e.window}else _=i,g=a-e.offset,c=e.length;c>l&&(c=l),l-=c,e.length-=c;do i[a++]=_[g++];while(--c);e.length===0&&(e.mode=qr);break;case ds:if(l===0)break e;i[a++]=e.length,l--,e.mode=qr;break;case wi:if(e.wrap){for(;u<32;){if(s===0)break e;s--,f|=n[o++]<<u,u+=8}if(m-=l,r.total_out+=m,e.total+=m,e.wrap&4&&m&&(r.adler=e.check=e.flags?V(e.check,i,m,a-m):Qt(e.check,i,m,a-m)),m=l,e.wrap&4&&(e.flags?f:gs(f))!==e.check){r.msg="incorrect data check",e.mode=P;break}f=0,u=0}e.mode=ms;case ms:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(e.wrap&4&&f!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=P;break}f=0,u=0}e.mode=ws;case ws:C=gp;break e;case P:C=Hs;break e;case Ws:return js;case Gs:default:return fe}return r.next_out=a,r.avail_out=l,r.next_in=o,r.avail_in=s,e.hold=f,e.bits=u,(e.wsize||m!==r.avail_out&&e.mode<P&&(e.mode<wi||t!==Ga))&&Qs(r,r.output,r.next_out,m-r.avail_out),d-=r.avail_in,m-=r.avail_out,r.total_in+=d,r.total_out+=m,e.total+=m,e.wrap&4&&m&&(r.adler=e.check=e.flags?V(e.check,i,m,r.next_out-m):Qt(e.check,i,m,r.next_out-m)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Ie?128:0)+(e.mode===Gr||e.mode===mi?256:0),(d===0&&m===0||t===Ga)&&C===nt&&(C=bp),C},Sp=r=>{if(it(r))return fe;let t=r.state;return t.window&&(t.window=null),r.state=null,nt},kp=(r,t)=>{if(it(r))return fe;let e=r.state;return(e.wrap&2)===0?fe:(e.head=t,t.done=!1,nt)},Ip=(r,t)=>{let e=t.length,n,i,o;return it(r)||(n=r.state,n.wrap!==0&&n.mode!==Qr)?fe:n.mode===Qr&&(i=1,i=Qt(i,t,e,0),i!==n.check)?Hs:(o=Qs(r,t,e,e),o?(n.mode=Ws,js):(n.havedict=1,nt))},$p=Ks,Fp=Xs,Op=qs,Np=Tp,Bp=Js,Up=Cp,Pp=Sp,Dp=kp,zp=Ip,Lp="pako inflate (from Nodeca project)",Fe={inflateReset:$p,inflateReset2:Fp,inflateResetKeep:Op,inflateInit:Np,inflateInit2:Bp,inflate:Up,inflateEnd:Pp,inflateGetHeader:Dp,inflateSetDictionary:zp,inflateInfo:Lp};function Mp(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vp=Mp,ef=Object.prototype.toString,{Z_NO_FLUSH:Yp,Z_FINISH:Zp,Z_OK:rr,Z_STREAM_END:bi,Z_NEED_DICT:vi,Z_STREAM_ERROR:Hp,Z_DATA_ERROR:bs,Z_MEM_ERROR:jp}=Tt;function ar(r){this.options=tn.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ms,this.strm.avail_out=0;let e=Fe.inflateInit2(this.strm,t.windowBits);if(e!==rr)throw new Error(tt[e]);if(this.header=new Vp,Fe.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=tr.string2buf(t.dictionary):ef.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Fe.inflateSetDictionary(this.strm,t.dictionary),e!==rr)))throw new Error(tt[e])}ar.prototype.push=function(r,t){let e=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Zp:Yp,ef.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),o=Fe.inflate(e,a),o===vi&&i&&(o=Fe.inflateSetDictionary(e,i),o===rr?o=Fe.inflate(e,a):o===bs&&(o=vi));e.avail_in>0&&o===bi&&e.state.wrap>0&&r[e.next_in]!==0;)Fe.inflateReset(e),o=Fe.inflate(e,a);switch(o){case Hp:case bs:case vi:case jp:return this.onEnd(o),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||o===bi))if(this.options.to==="string"){let l=tr.utf8border(e.output,e.next_out),f=e.next_out-l,u=tr.buf2string(e.output,l);e.next_out=f,e.avail_out=n-f,f&&e.output.set(e.output.subarray(l,l+f),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===rr&&s===0)){if(o===bi)return o=Fe.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};ar.prototype.onData=function(r){this.chunks.push(r)};ar.prototype.onEnd=function(r){r===rr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Ui(r,t){let e=new ar(t);if(e.push(r),e.err)throw e.msg||tt[e.err];return e.result}function Wp(r,t){return t=t||{},t.raw=!0,Ui(r,t)}var Gp=ar,qp=Ui,Kp=Wp,Xp=Ui,Jp=Tt,Qp={Inflate:Gp,inflate:qp,inflateRaw:Kp,ungzip:Xp,constants:Jp},{Deflate:pm,deflate:dm,deflateRaw:mm,gzip:wm}=sp,{Inflate:gm,inflate:_m,inflateRaw:e0,ungzip:bm}=Qp;var tf=e0;function rf(r){return tf(r.subarray(2))}h();p();var Pi=class extends Error{constructor(t){super(t),this.code="ERR_ABORTED"}};function nf(r){r.sort((i,o)=>Number(i.offset)-Number(o.offset));let t=[],e,n;for(let i of r)e&&n&&Number(i.offset)-n<=2e3?(e.length=BigInt(Number(e.length)+Number(i.length)-n+Number(i.offset)),e.blocks.push(i)):t.push(e={blocks:[i],length:i.length,offset:i.offset}),n=Number(e.offset)+Number(e.length);return t}function sr(r){if(!!r&&r.aborted)if(typeof DOMException=="undefined"){let t=new Pi("aborted");throw t.code="ERR_ABORTED",t}else throw new DOMException("aborted","AbortError")}var t0=1,r0=2,n0=3;function Di(r,t,e,n){return r<n&&t>=e}function i0(r){let t=r?"big":"little",e=new F().endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new F().endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new F().endianess(t).array("blocksToFetch",{length:"cnt",type:new F().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new F().array("recurOffsets",{length:"cnt",type:new F().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=new F().endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new F().endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[n0]:new F().array("items",{length:"itemCount",type:new F().floatle("score")}),[r0]:new F().array("items",{length:"itemCount",type:new F().endianess(t).int32("start").floatle("score")}),[t0]:new F().array("items",{length:"itemCount",type:new F().endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:e,leafParser:n}}var fr=class{constructor(t,e,n,i,o,a){if(this.bbi=t,this.refsByName=e,this.cirTreeOffset=n,this.isBigEndian=i,this.isCompressed=o,this.blockType=a,this.featureCache=new of.default({cache:new af.default({maxSize:1e3}),fill:async(l,f)=>{let u=Number(l.length),d=Number(l.offset),{buffer:m}=await this.bbi.read(v.alloc(u),0,u,d,{signal:f});return m}}),!(n>=0))throw new Error("invalid cirTreeOffset!");let s=i0(i);this.leafParser=s.leafParser,this.bigBedParser=s.bigBedParser}async readWigData(t,e,n,i,o){try{let{refsByName:a,bbi:s,cirTreeOffset:l,isBigEndian:f}=this,u=a[t];u===void 0&&i.complete();let d={chrId:u,start:e,end:n};this.cirTreePromise||(this.cirTreePromise=s.read(v.alloc(48),0,48,Number(l),o));let{buffer:m}=await this.cirTreePromise,c=f?m.readUInt32BE(4):m.readUInt32LE(4),g=[],_=0,A=(x,S,I)=>{try{let E=x.subarray(S),C=this.leafParser.parse(E);if(C.blocksToFetch&&(g=g.concat(C.blocksToFetch.filter(k=>y(k)).map(k=>({offset:k.blockOffset,length:k.blockSize})))),C.recurOffsets){let k=C.recurOffsets.filter($=>y($)).map($=>Number($.blockOffset));k.length>0&&T(k,I+1)}}catch(E){i.error(E)}},y=x=>{let{startChrom:S,startBase:I,endChrom:E,endBase:C}=x;return(S<u||S===u&&I<=n)&&(E>u||E===u&&C>=e)},R=async(x,S,I)=>{try{let E=S.max-S.min,C=S.min,k=await this.featureCache.get(`${E}_${C}`,{length:E,offset:C},o==null?void 0:o.signal);for(let $ of x)S.contains($)&&(A(k,$-C,I),_-=1,_===0&&this.readFeatures(i,g,{...o,request:d}).catch(O=>i.error(O)))}catch(E){i.error(E)}},T=(x,S)=>{try{_+=x.length;let I=4+Number(c)*32,E=new xe([{min:x[0],max:x[0]+I}]);for(let C=1;C<x.length;C+=1){let k=new xe([{min:x[C],max:x[C]+I}]);E=E.union(k)}E.getRanges().map(C=>R(x,C,S))}catch(I){i.error(I)}};return T([Number(l)+48],1)}catch(a){i.error(a)}}parseSummaryBlock(t,e,n){let i=[],o=e,a=new DataView(t.buffer,t.byteOffset,t.length);for(;o<t.byteLength;){let s=a.getUint32(o,!0);o+=4;let l=a.getUint32(o,!0);o+=4;let f=a.getUint32(o,!0);o+=4;let u=a.getUint32(o,!0);o+=4;let d=a.getFloat32(o,!0);o+=4;let m=a.getFloat32(o,!0);o+=4;let c=a.getFloat32(o,!0);o+=4,o+=4,(!n||s===n.chrId&&Di(l,f,n.start,n.end))&&i.push({start:l,end:f,maxScore:m,minScore:d,summary:!0,score:c/(u||1)})}return i}parseBigBedBlock(t,e,n,i){let o=[],a=e;for(;a<t.byteLength;){let s=this.bigBedParser.parse(t.subarray(a));s.uniqueId=`bb-${n+a}`,o.push(s),a+=s.offset}return i?o.filter(s=>Di(s.start,s.end,i.start,i.end)):o}parseBigWigBlock(t,e,n){let i=t.subarray(e),o=new DataView(i.buffer,i.byteOffset,i.length),a=0;a+=4;let s=o.getInt32(a,!0);a+=8;let l=o.getUint32(a,!0);a+=4;let f=o.getUint32(a,!0);a+=4;let u=o.getUint8(a);a+=2;let d=o.getUint16(a,!0);a+=2;let m=new Array(d);switch(u){case 1:{for(let c=0;c<d;c++){let g=o.getInt32(a,!0);a+=4;let _=o.getInt32(a,!0);a+=4;let A=o.getFloat32(a,!0);a+=4,m[c]={start:g,end:_,score:A}}break}case 2:{for(let c=0;c<d;c++){let g=o.getInt32(a,!0);a+=4;let _=o.getFloat32(a,!0);a+=4,m[c]={score:_,start:g,end:g+f}}break}case 3:{for(let c=0;c<d;c++){let g=o.getFloat32(a,!0);a+=4;let _=s+c*l;m[c]={score:g,start:_,end:_+f}}break}}return n?m.filter(c=>Di(c.start,c.end,n.start,n.end)):m}async readFeatures(t,e,n={}){try{let{blockType:i,isCompressed:o}=this,{signal:a,request:s}=n,l=nf(e);sr(a),await Promise.all(l.map(async f=>{sr(a);let{length:u,offset:d}=f,m=await this.featureCache.get(`${u}_${d}`,f,a);for(let c of f.blocks){sr(a);let g=Number(c.offset)-Number(f.offset),_=m;switch(o&&(_=rf(m.subarray(g)),g=0),sr(a),i){case"summary":{t.next(this.parseSummaryBlock(_,g,s));break}case"bigwig":{t.next(this.parseBigWigBlock(_,g,s));break}case"bigbed":{t.next(this.parseBigBedBlock(_,g,Number(c.offset)*(1<<8),s));break}default:console.warn(`Don't know what to do with ${i}`)}}})),t.complete()}catch(i){t.error(i)}}};h();p();h();p();var o0=Re(zi());h();p();function sf(r){return(typeof r=="object"&&r!==null&&"message"in r?r.message:`${r}`).replace(/\.$/,"")}var ot=class{async getBufferFromResponse(t){let e=await t.arrayBuffer();return v.from(e)}constructor(t,e={}){this.baseOverrides={},this.url=t;let n=e.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=n}async fetch(t,e){let n;try{n=await this.fetchImplementation(t,e)}catch(i){if(`${i}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`);try{n=await this.fetchImplementation(t,{...e,cache:"reload"})}catch(o){throw new Error(`${sf(o)} fetching ${t}`,{cause:o})}}else throw new Error(`${sf(i)} fetching ${t}`,{cause:i})}return n}async read(t,e=0,n,i=0,o={}){let{headers:a={},signal:s,overrides:l={}}=o;n<1/0?a.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(a.range=`bytes=${i}-`);let f=await this.fetch(this.url,{...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s});if(!f.ok)throw new Error(`HTTP ${f.status} fetching ${this.url}`);if(f.status===200&&i===0||f.status===206){let u=await this.getBufferFromResponse(f),d=u.copy(t,e,0,Math.min(n,u.length)),m=f.headers.get("content-range"),c=/\/(\d+)$/.exec(m||"");return c!=null&&c[1]&&(this._stat={size:parseInt(c[1],10)}),{bytesRead:d,buffer:t}}throw f.status===200?new Error(`${this.url} fetch returned status 200, expected 206`):new Error(`HTTP ${f.status} fetching ${this.url}`)}async readFile(t={}){let e,n;typeof t=="string"?(e=t,n={}):(e=t.encoding,n=t,delete n.encoding);let{headers:i={},signal:o,overrides:a={}}=n,s=await this.fetch(this.url,{headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a});if(s.status!==200)throw new Error(`HTTP ${s.status} fetching ${this.url}`);if(e==="utf8")return s.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.getBufferFromResponse(s)}async stat(){if(!this._stat){let t=v.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}};h();p();h();p();var Li=Re(zi());h();p();h();p();h();p();h();p();var Mi=function(r,t){return Mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Mi(r,t)};function ur(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mi(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ff(r,t,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(u){try{f(n.next(u))}catch(d){a(d)}}function l(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?o(u.value):i(u.value).then(s,l)}f((n=n.apply(r,t||[])).next())})}function nn(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(f){return function(u){return l([f,u])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(e=0)),e;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,i=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(r,e)}catch(u){f=[6,u],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function at(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o}function kt(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}function st(r){return this instanceof st?(this.v=r,this):new st(r)}function uf(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(c){return function(g){return Promise.resolve(g).then(c,d)}}function s(c,g){n[c]&&(i[c]=function(_){return new Promise(function(A,y){o.push([c,_,A,y])>1||l(c,_)})},g&&(i[c]=g(i[c])))}function l(c,g){try{f(n[c](g))}catch(_){m(o[0][3],_)}}function f(c){c.value instanceof st?Promise.resolve(c.value.v).then(u,d):m(o[0][2],c)}function u(c){l("next",c)}function d(c){l("throw",c)}function m(c,g){c(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function lf(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof at=="function"?at(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=r[o]&&function(a){return new Promise(function(s,l){a=r[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(f){o({value:f,done:s})},a)}}h();p();function B(r){return typeof r=="function"}h();p();h();p();h();p();function on(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var an=on(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});h();p();function Vi(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var sn=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=at(a),l=s.next();!l.done;l=s.next()){var f=l.value;f.remove(this)}}catch(_){t={error:_}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(B(u))try{u()}catch(_){o=_ instanceof an?_.errors:[_]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var m=at(d),c=m.next();!c.done;c=m.next()){var g=c.value;try{cf(g)}catch(_){o=o!=null?o:[],_ instanceof an?o=kt(kt([],St(o)),St(_.errors)):o.push(_)}}}catch(_){n={error:_}}finally{try{c&&!c.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}}if(o)throw new an(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)cf(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Vi(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&Vi(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();var Jm=sn.EMPTY;function fn(r){return r instanceof sn||r&&"closed"in r&&B(r.remove)&&B(r.add)&&B(r.unsubscribe)}function cf(r){B(r)?r():r.unsubscribe()}h();p();var we={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};h();p();h();p();var It={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=It.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,kt([r,t],St(e))):setTimeout.apply(void 0,kt([r,t],St(e)))},clearTimeout:function(r){var t=It.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function un(r){It.setTimeout(function(){var t=we.onUnhandledError;if(t)t(r);else throw r})}h();p();function Yi(){}h();p();var hf=function(){return Zi("C",void 0,void 0)}();function pf(r){return Zi("E",void 0,r)}function df(r){return Zi("N",r,void 0)}function Zi(r,t,e){return{kind:r,value:t,error:e}}h();p();var ft=null;function mf(r){if(we.useDeprecatedSynchronousErrorHandling){var t=!ft;if(t&&(ft={errorThrown:!1,error:null}),r(),t){var e=ft,n=e.errorThrown,i=e.error;if(ft=null,n)throw i}}else r()}function wf(r){we.useDeprecatedSynchronousErrorHandling&&ft&&(ft.errorThrown=!0,ft.error=r)}var lr=function(r){ur(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,fn(e)&&e.add(n)):n.destination=u0,n}return t.create=function(e,n,i){return new $t(e,n,i)},t.prototype.next=function(e){this.isStopped?ji(df(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ji(pf(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ji(hf,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(sn);var a0=Function.prototype.bind;function Hi(r,t){return a0.call(r,t)}var s0=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){ln(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){ln(n)}else ln(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){ln(e)}},r}(),$t=function(r){ur(t,r);function t(e,n,i){var o=r.call(this)||this,a;if(B(e)||!e)a={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var s;o&&we.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=function(){return o.unsubscribe()},a={next:e.next&&Hi(e.next,s),error:e.error&&Hi(e.error,s),complete:e.complete&&Hi(e.complete,s)}):a=e}return o.destination=new s0(a),o}return t}(lr);function ln(r){we.useDeprecatedSynchronousErrorHandling?wf(r):un(r)}function f0(r){throw r}function ji(r,t){var e=we.onStoppedNotification;e&&It.setTimeout(function(){return e(r,t)})}var u0={closed:!0,next:Yi,error:f0,complete:Yi};h();p();var Ft=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();h();p();h();p();function cn(r){return r}function gf(r){return r.length===0?cn:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var D=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=c0(t)?t:new $t(t,e,n);return mf(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=_f(e),new e(function(i,o){var a=new $t({next:function(s){try{t(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[Ft]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return gf(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=_f(t),new t(function(n,i){var o;e.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function _f(r){var t;return(t=r!=null?r:we.Promise)!==null&&t!==void 0?t:Promise}function l0(r){return r&&B(r.next)&&B(r.error)&&B(r.complete)}function c0(r){return r&&r instanceof lr||l0(r)&&fn(r)}h();p();function h0(r){return B(r==null?void 0:r.lift)}function ue(r){return function(t){if(h0(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}h();p();function Oe(r,t,e,n,i){return new p0(r,t,e,n,i)}var p0=function(r){ur(t,r);function t(e,n,i,o,a,s){var l=r.call(this,e)||this;return l.onFinalize=a,l.shouldUnsubscribe=s,l._next=n?function(f){try{n(f)}catch(u){e.error(u)}}:r.prototype._next,l._error=o?function(f){try{o(f)}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._error,l._complete=i?function(){try{i()}catch(f){e.error(f)}finally{this.unsubscribe()}}:r.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(lr);h();p();var bf=new D(function(r){return r.complete()});h();p();h();p();function vf(r){return r&&B(r.schedule)}function xf(r){return r[r.length-1]}function yf(r){return vf(xf(r))?r.pop():void 0}function Ef(r,t){return typeof xf(r)=="number"?r.pop():t}h();p();h();p();h();p();h();p();h();p();var hn=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};h();p();function pn(r){return B(r==null?void 0:r.then)}h();p();function dn(r){return B(r[Ft])}h();p();function mn(r){return Symbol.asyncIterator&&B(r==null?void 0:r[Symbol.asyncIterator])}h();p();function wn(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}h();p();h();p();function d0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gn=d0();function _n(r){return B(r==null?void 0:r[gn])}h();p();function bn(r){return uf(this,arguments,function(){var e,n,i,o;return nn(this,function(a){switch(a.label){case 0:e=r.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,st(e.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,st(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,st(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function vn(r){return B(r==null?void 0:r.getReader)}function le(r){if(r instanceof D)return r;if(r!=null){if(dn(r))return m0(r);if(hn(r))return w0(r);if(pn(r))return g0(r);if(mn(r))return Af(r);if(_n(r))return _0(r);if(vn(r))return b0(r)}throw wn(r)}function m0(r){return new D(function(t){var e=r[Ft]();if(B(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function w0(r){return new D(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function g0(r){return new D(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,un)})}function _0(r){return new D(function(t){var e,n;try{for(var i=at(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}t.complete()})}function Af(r){return new D(function(t){v0(r,t).catch(function(e){return t.error(e)})})}function b0(r){return Af(bn(r))}function v0(r,t){var e,n,i,o;return ff(this,void 0,void 0,function(){var a,s;return nn(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),e=lf(r),l.label=1;case 1:return[4,e.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),i={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}h();p();h();p();function ce(r,t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){e(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(o),!i)return o}function xn(r,t){return t===void 0&&(t=0),ue(function(e,n){e.subscribe(Oe(n,function(i){return ce(n,r,function(){return n.next(i)},t)},function(){return ce(n,r,function(){return n.complete()},t)},function(i){return ce(n,r,function(){return n.error(i)},t)}))})}h();p();function yn(r,t){return t===void 0&&(t=0),ue(function(e,n){n.add(r.schedule(function(){return e.subscribe(n)},t))})}function Tf(r,t){return le(r).pipe(yn(t),xn(t))}h();p();function Rf(r,t){return le(r).pipe(yn(t),xn(t))}h();p();function Cf(r,t){return new D(function(e){var n=0;return t.schedule(function(){n===r.length?e.complete():(e.next(r[n++]),e.closed||this.schedule())})})}h();p();function Sf(r,t){return new D(function(e){var n;return ce(e,t,function(){n=r[gn](),ce(e,t,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){e.error(s);return}a?e.complete():e.next(o)},0,!0)}),function(){return B(n==null?void 0:n.return)&&n.return()}})}h();p();function En(r,t){if(!r)throw new Error("Iterable cannot be null");return new D(function(e){ce(e,t,function(){var n=r[Symbol.asyncIterator]();ce(e,t,function(){n.next().then(function(i){i.done?e.complete():e.next(i.value)})},0,!0)})})}h();p();function kf(r,t){return En(bn(r),t)}function If(r,t){if(r!=null){if(dn(r))return Tf(r,t);if(hn(r))return Cf(r,t);if(pn(r))return Rf(r,t);if(mn(r))return En(r,t);if(_n(r))return Sf(r,t);if(vn(r))return kf(r,t)}throw wn(r)}function $f(r,t){return t?If(r,t):le(r)}h();p();var Ff=on(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});h();p();function cr(r,t){var e=typeof t=="object";return new Promise(function(n,i){var o=new $t({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){e?n(t.defaultValue):i(new Ff)}});r.subscribe(o)})}h();p();function hr(r,t){return ue(function(e,n){var i=0;e.subscribe(Oe(n,function(o){n.next(r.call(t,o,i++))}))})}h();p();h();p();h();p();function Of(r,t,e,n,i,o,a,s){var l=[],f=0,u=0,d=!1,m=function(){d&&!l.length&&!f&&t.complete()},c=function(_){return f<n?g(_):l.push(_)},g=function(_){o&&t.next(_),f++;var A=!1;le(e(_,u++)).subscribe(Oe(t,function(y){i==null||i(y),o?c(y):t.next(y)},function(){A=!0},void 0,function(){if(A)try{f--;for(var y=function(){var R=l.shift();a?ce(t,a,function(){return g(R)}):g(R)};l.length&&f<n;)y();m()}catch(R){t.error(R)}}))};return r.subscribe(Oe(t,c,function(){d=!0,m()})),function(){s==null||s()}}function Wi(r,t,e){return e===void 0&&(e=1/0),B(t)?Wi(function(n,i){return hr(function(o,a){return t(n,o,i,a)})(le(r(n,i)))},e):(typeof t=="number"&&(e=t),ue(function(n,i){return Of(n,i,r,e)}))}function Nf(r){return r===void 0&&(r=1/0),Wi(cn,r)}h();p();function Gi(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=yf(r),n=Ef(r,1/0),i=r;return i.length?i.length===1?le(i[0]):Nf(n)($f(i,e)):bf}h();p();h();p();h();p();function Bf(r,t,e,n,i){return function(o,a){var s=e,l=t,f=0;o.subscribe(Oe(a,function(u){var d=f++;l=s?r(l,u,d):(s=!0,u),n&&a.next(l)},i&&function(){s&&a.next(l),a.complete()}))}}function pr(r,t){return ue(Bf(r,t,arguments.length>=2,!1,!0))}var x0=function(r,t){return r.push(t),r};function qi(){return ue(function(r,t){pr(x0,[])(r).subscribe(t)})}h();p();var Uf=-2003829722,Ki=-2021002517;function y0(r){return new TextDecoder().decode(r)}function Pf(r){let t=r?"big":"little",e=new F().endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new F().endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new F().endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),i=new F().endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),o=new F().endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:i,totalSummaryParser:n,headerParser:e,isLeafNode:o}}var dr=class{getHeader(t){return this.headerP||(this.headerP=this._getHeader(t).catch(e=>{throw this.headerP=void 0,e})),this.headerP}constructor(t){let{filehandle:e,renameRefSeqs:n=a=>a,path:i,url:o}=t;if(this.renameRefSeqs=n,e)this.bbi=e;else if(o)this.bbi=new ot(o);else if(i)this.bbi=new Li.default(i);else throw new Error("no file given")}async _getHeader(t){let e=await this._getMainHeader(t),n=await this._readChromTree(e,t);return{...e,...n}}async _getMainHeader(t,e=2e3){let{buffer:n}=await this.bbi.read(v.alloc(e),0,e,0,t),i=this._isBigEndian(n),o=Pf(i),a=o.headerParser.parse(n),{magic:s,asOffset:l,totalSummaryOffset:f}=a;if(a.fileType=s===Ki?"bigbed":"bigwig",l>e||f>e)return this._getMainHeader(t,e*2);if(l){let u=Number(a.asOffset);a.autoSql=y0(n.subarray(u,n.indexOf(0,u)))}if(a.totalSummaryOffset>e-8*5)return this._getMainHeader(t,e*2);if(a.totalSummaryOffset){let u=n.subarray(Number(a.totalSummaryOffset)),d=o.totalSummaryParser.parse(u);a.totalSummary={...d,basesCovered:Number(d.basesCovered)}}return{...a,isBigEndian:i}}_isBigEndian(t){let e=t.readInt32LE(0);if(e===Uf||e===Ki)return!1;if(e=t.readInt32BE(0),e===Uf||e===Ki)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,e){let n=t.isBigEndian,i=n?"big":"little",o=[],a={},s=Number(t.unzoomedDataOffset),l=Number(t.chromTreeOffset);for(;s%4!==0;)s+=1;let f=s-l,{buffer:u}=await this.bbi.read(v.alloc(f),0,f,Number(l),e),d=Pf(n),{keySize:m}=d.chromTreeParser.parse(u),c=new F().endianess(i).string("key",{stripNull:!0,length:m}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new F().endianess(i).skip(m).uint64("childOffset").saveOffset("offset"),_=32,A=async y=>{let R=y;if(R>=u.length)throw new Error("reading beyond end of buffer");let T=d.isLeafNode.parse(u.subarray(R)),{isLeafNode:x,cnt:S}=T;if(R+=T.offset,x)for(let I=0;I<S;I+=1){let E=c.parse(u.subarray(R));R+=E.offset;let{key:C,refId:k,refSize:$}=E,O={name:C,id:k,length:$};a[this.renameRefSeqs(C)]=k,o[k]=O}else{let I=[];for(let E=0;E<S;E+=1){let C=g.parse(u.subarray(R)),{childOffset:k}=C;R+=C.offset,I.push(A(Number(k)-Number(l)))}await Promise.all(I)}};return await A(_),{refsByName:a,refsByNumber:o}}async getUnzoomedView(t){let{unzoomedIndexOffset:e,refsByName:n,uncompressBufSize:i,isBigEndian:o,fileType:a}=await this.getHeader(t);return new fr(this.bbi,n,e,o,i>0,a)}async getFeatureStream(t,e,n,i){await this.getHeader(i);let o=this.renameRefSeqs(t),a,{basesPerSpan:s,scale:l}=i||{};return s?a=await this.getView(1/s,i):l?a=await this.getView(l,i):a=await this.getView(1,i),new D(f=>{a.readWigData(o,e,n,f,i).catch(u=>f.error(u))})}async getFeatures(t,e,n,i){let o=await this.getFeatureStream(t,e,n,i);return(await cr(o.pipe(qi()))).flat()}};h();p();var Df=Re(ii()),zf=Re(ai());function E0(r){return r.filter(t=>!!t)}var mr=class extends dr{constructor(){super(...arguments),this.readIndicesCache=new Df.default({cache:new zf.default({maxSize:1}),fill:(t,e)=>this._readIndices({...t,signal:e})})}readIndices(t={}){let{signal:e,...n}=t;return this.readIndicesCache.get(JSON.stringify(n),t,e)}async getView(t,e){return this.getUnzoomedView(e)}async _readIndices(t){let{extHeaderOffset:e,isBigEndian:n}=await this.getHeader(t),{buffer:i}=await this.bbi.read(v.alloc(64),0,64,Number(e)),o=n?"big":"little",a=new F().endianess(o).uint16("size").uint16("count").uint64("offset").parse(i),{count:s,offset:l}=a;if(s===0)return[];let f=20,u=f*s,{buffer:d}=await this.bbi.read(v.alloc(u),0,u,Number(l)),m=new F().endianess(o).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),c=[];for(let g=0;g<s;g+=1)c.push(m.parse(d.subarray(g*f)));return c}async searchExtraIndexBlocks(t,e={}){let{isBigEndian:n}=await this.getHeader(e),i=await this.readIndices(e);if(i.length===0)return[];let o=i.map(async a=>{let{offset:s,field:l}=a,{buffer:f}=await this.bbi.read(v.alloc(32),0,32,Number(s),e),u=n?"big":"little",d=new F().endianess(u).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:m,keySize:c,valSize:g}=d.parse(f),_=new F().endianess(u).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:new F().array("leafkeys",{length:"cnt",type:new F().endianess(u).string("key",{length:c,stripNull:!0}).uint64("offset")}),1:new F().array("keys",{length:"cnt",type:new F().endianess(u).string("key",{length:c,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),A=async R=>{let T=Number(R),x=4+m*(c+g),{buffer:S}=await this.bbi.read(v.alloc(x),0,x,T,e),I=_.parse(S);if(I.leafkeys){let E;for(let{key:C,offset:k}of I.leafkeys){if(t.localeCompare(C)<0&&E)return A(E);E=k}return A(E)}for(let E of I.keys)if(E.key===t)return{...E,field:l}},y=32;return A(Number(s)+y)});return E0(await Promise.all(o))}async searchExtraIndex(t,e={}){let n=await this.searchExtraIndexBlocks(t,e);if(n.length===0)return[];let i=await this.getUnzoomedView(e),o=n.map(s=>new D(l=>{i.readFeatures(l,[s],e).catch(f=>l.error(f))}).pipe(pr((l,f)=>l.concat(f)),hr(l=>{for(let f of l)f.field=s.field;return l})));return(await cr(Gi(...o))).filter(s=>{var l;return((l=s.rest)===null||l===void 0?void 0:l.split("	")[(s.field||0)-3])===t})}};h();p();var A0=Re(Lf());h();p();var Xi=Re(Mf()),Ot=class{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){let e=await t.arrayBuffer();return v.from(e)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,e={}){this.auth={},this.baseOverrides={},this.url=t,this.auth=e.auth||{};let n=e.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");e.overrides&&(this.baseOverrides=e.overrides),this.fetchImplementation=n}async fetch(t,e){let n;try{n=await this.fetchImplementation(t,e)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(t,{...e,cache:"reload"});else throw i}return n}async read(t,e=0,n,i=0,o={}){let{headers:a={},signal:s,overrides:l={}}=o;n<1/0?a.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(a.range=`bytes=${i}-`),this.auth&&this.auth.user&&this.auth.password&&(a.Authorization=`Basic ${(0,Xi.encode)(this.auth.user+":"+this.auth.password)}`);let f={...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},u=await this.fetch(this.url,f);if(!u.ok)throw new Error(`HTTP ${u.status} ${u.statusText} ${this.url}`);if(u.status===200&&i===0||u.status===206){let d=await this.getBufferFromResponse(u),m=d.copy(t,e,0,Math.min(n,d.length)),c=u.headers.get("content-range"),g=/\/(\d+)$/.exec(c||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:m,buffer:t}}if(u.status===200)throw new Error("${this.url} fetch returned status 200, expected 206");if(u.status===404)return{bytesRead:0,buffer:t};throw new Error(`HTTP ${u.status} fetching ${this.url}`)}async readFile(t={}){let e,n;typeof t=="string"?(e=t,n={}):(e=t.encoding,n=t,delete n.encoding);let{headers:i={},signal:o,overrides:a={}}=n;this.auth&&this.auth.user&&this.auth.password&&(i.Authorization=`Basic ${(0,Xi.encode)(this.auth.user+":"+this.auth.password)}`);let s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a},l=await this.fetch(this.url,s);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status===404)return v.alloc(1);if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(e==="utf8")return l.text();if(e)throw new Error(`unsupported encoding: ${e}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){let t=v.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}};h();p();h();p();h();p();h();p();var Vf={},Ji={},Qi=34,gr=10,eo=13;function Zf(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function T0(r,t){var e=Zf(r);return function(n,i){return t(e(n),i,r)}}function Yf(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function Q(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function R0(r){return r<0?"-"+Q(-r,6):r>9999?"+"+Q(r,6):Q(r,4)}function C0(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":R0(r.getUTCFullYear(),4)+"-"+Q(r.getUTCMonth()+1,2)+"-"+Q(r.getUTCDate(),2)+(i?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"."+Q(i,3)+"Z":n?"T"+Q(t,2)+":"+Q(e,2)+":"+Q(n,2)+"Z":e||t?"T"+Q(t,2)+":"+Q(e,2)+"Z":"")}function Hf(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(d,m){var c,g,_=i(d,function(A,y){if(c)return c(A,y-1);g=A,c=m?T0(A,m):Zf(A)});return _.columns=g||[],_}function i(d,m){var c=[],g=d.length,_=0,A=0,y,R=g<=0,T=!1;d.charCodeAt(g-1)===gr&&--g,d.charCodeAt(g-1)===eo&&--g;function x(){if(R)return Ji;if(T)return T=!1,Vf;var I,E=_,C;if(d.charCodeAt(E)===Qi){for(;_++<g&&d.charCodeAt(_)!==Qi||d.charCodeAt(++_)===Qi;);return(I=_)>=g?R=!0:(C=d.charCodeAt(_++))===gr?T=!0:C===eo&&(T=!0,d.charCodeAt(_)===gr&&++_),d.slice(E+1,I-1).replace(/""/g,'"')}for(;_<g;){if((C=d.charCodeAt(I=_++))===gr)T=!0;else if(C===eo)T=!0,d.charCodeAt(_)===gr&&++_;else if(C!==e)continue;return d.slice(E,I)}return R=!0,d.slice(E,g)}for(;(y=x())!==Ji;){for(var S=[];y!==Vf&&y!==Ji;)S.push(y),y=x();m&&(S=m(S,A++))==null||c.push(S)}return c}function o(d,m){return d.map(function(c){return m.map(function(g){return u(c[g])}).join(r)})}function a(d,m){return m==null&&(m=Yf(d)),[m.map(u).join(r)].concat(o(d,m)).join(`
`)}function s(d,m){return m==null&&(m=Yf(d)),o(d,m).join(`
`)}function l(d){return d.map(f).join(`
`)}function f(d){return d.map(u).join(r)}function u(d){return d==null?"":d instanceof Date?C0(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:f,formatValue:u}}h();p();var ut=Hf("	"),S0=ut.parse,to=ut.parseRows,k0=ut.format,I0=ut.formatBody,$0=ut.formatRows,F0=ut.formatRow,O0=ut.formatValue;h();p();h();p();h();p();h();p();h();p();var ne="$";function Tn(){}Tn.prototype=jf.prototype={constructor:Tn,has:function(r){return ne+r in this},get:function(r){return this[ne+r]},set:function(r,t){return this[ne+r]=t,this},remove:function(r){var t=ne+r;return t in this&&delete this[t]},clear:function(){for(var r in this)r[0]===ne&&delete this[r]},keys:function(){var r=[];for(var t in this)t[0]===ne&&r.push(t.slice(1));return r},values:function(){var r=[];for(var t in this)t[0]===ne&&r.push(this[t]);return r},entries:function(){var r=[];for(var t in this)t[0]===ne&&r.push({key:t.slice(1),value:this[t]});return r},size:function(){var r=0;for(var t in this)t[0]===ne&&++r;return r},empty:function(){for(var r in this)if(r[0]===ne)return!1;return!0},each:function(r){for(var t in this)t[0]===ne&&r(this[t],t.slice(1),this)}};function jf(r,t){var e=new Tn;if(r instanceof Tn)r.each(function(s,l){e.set(l,s)});else if(Array.isArray(r)){var n=-1,i=r.length,o;if(t==null)for(;++n<i;)e.set(n,r[n]);else for(;++n<i;)e.set(t(o=r[n],n,r),o)}else if(r)for(var a in r)e.set(a,r[a]);return e}var Nt=jf;h();p();function Rn(){}var lt=Nt.prototype;Rn.prototype=N0.prototype={constructor:Rn,has:lt.has,add:function(r){return r+="",this[ne+r]=r,this},remove:lt.remove,clear:lt.clear,values:lt.keys,size:lt.size,empty:lt.empty,each:lt.each};function N0(r,t){var e=new Rn;if(r instanceof Rn)r.each(function(o){e.add(o)});else if(r){var n=-1,i=r.length;if(t==null)for(;++n<i;)e.add(r[n]);else for(;++n<i;)e.add(t(r[n],n,r))}return e}h();p();h();p();h();p();h();p();h();p();var B0={value:function(){}};function Gf(){for(var r=0,t=arguments.length,e={},n;r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Cn(e)}function Cn(r){this._=r}function U0(r,t){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Cn.prototype=Gf.prototype={constructor:Cn,on:function(r,t){var e=this._,n=U0(r+"",e),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(r=n[o]).type)&&(i=P0(e[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(r=n[o]).type)e[i]=Wf(e[i],r.name,t);else if(t==null)for(i in e)e[i]=Wf(e[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new Cn(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var e=new Array(i),n=0,i,o;n<i;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,i=o.length;n<i;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,o=n.length;i<o;++i)n[i].value.apply(t,e)}};function P0(r,t){for(var e=0,n=r.length,i;e<n;++e)if((i=r[e]).name===t)return i.value}function Wf(r,t,e){for(var n=0,i=r.length;n<i;++n)if(r[n].name===t){r[n]=B0,r=r.slice(0,n).concat(r.slice(n+1));break}return e!=null&&r.push({name:t,value:e}),r}var ro=Gf;function _r(r,t){var e,n=ro("beforesend","progress","load","error"),i,o=Nt(),a=new XMLHttpRequest,s=null,l=null,f,u,d=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(r)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=a.ontimeout=m:a.onreadystatechange=function(c){a.readyState>3&&m(c)};function m(c){var g=a.status,_;if(!g&&z0(a)||g>=200&&g<300||g===304){if(f)try{_=f.call(e,a)}catch(A){n.call("error",e,A);return}else _=a;n.call("load",e,_)}else n.call("error",e,c)}if(a.onprogress=function(c){n.call("progress",e,c)},e={header:function(c,g){return c=(c+"").toLowerCase(),arguments.length<2?o.get(c):(g==null?o.remove(c):o.set(c,g+""),e)},mimeType:function(c){return arguments.length?(i=c==null?null:c+"",e):i},responseType:function(c){return arguments.length?(u=c,e):u},timeout:function(c){return arguments.length?(d=+c,e):d},user:function(c){return arguments.length<1?s:(s=c==null?null:c+"",e)},password:function(c){return arguments.length<1?l:(l=c==null?null:c+"",e)},response:function(c){return f=c,e},get:function(c,g){return e.send("GET",c,g)},post:function(c,g){return e.send("POST",c,g)},send:function(c,g,_){return a.open(c,r,!0,s,l),i!=null&&!o.has("accept")&&o.set("accept",i+",*/*"),a.setRequestHeader&&o.each(function(A,y){a.setRequestHeader(y,A)}),i!=null&&a.overrideMimeType&&a.overrideMimeType(i),u!=null&&(a.responseType=u),d>0&&(a.timeout=d),_==null&&typeof g=="function"&&(_=g,g=null),_!=null&&_.length===1&&(_=D0(_)),_!=null&&e.on("error",_).on("load",function(A){_(null,A)}),n.call("beforesend",e,a),a.send(g==null?null:g),e},abort:function(){return a.abort(),e},on:function(){var c=n.on.apply(n,arguments);return c===n?e:c}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return e.get(t)}return e}function D0(r){return function(t,e){r(t==null?e:null)}}function z0(r){var t=r.responseType;return t&&t!=="text"?r.response:r.responseText}h();p();h();p();function je(r,t){return function(e,n){var i=_r(e).mimeType(r).response(t);if(n!=null){if(typeof n!="function")throw new Error("invalid callback: "+n);return i.get(n)}return i}}var L0=je("text/html",function(r){return document.createRange().createContextualFragment(r.responseText)});h();p();var M0=je("application/json",function(r){return JSON.parse(r.responseText)});h();p();var no=je("text/plain",function(r){return r.responseText});h();p();var V0=je("application/xml",function(r){var t=r.responseXML;if(!t)throw new Error("parse error");return t});h();p();h();p();h();p();var qf={},io={},oo=34,br=10,ao=13;function Xf(r){return new Function("d","return {"+r.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Y0(r,t){var e=Xf(r);return function(n,i){return t(e(n),i,r)}}function Kf(r){var t=Object.create(null),e=[];return r.forEach(function(n){for(var i in n)i in t||e.push(t[i]=i)}),e}function ee(r,t){var e=r+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function Z0(r){return r<0?"-"+ee(-r,6):r>9999?"+"+ee(r,6):ee(r,4)}function H0(r){var t=r.getUTCHours(),e=r.getUTCMinutes(),n=r.getUTCSeconds(),i=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Z0(r.getUTCFullYear(),4)+"-"+ee(r.getUTCMonth()+1,2)+"-"+ee(r.getUTCDate(),2)+(i?"T"+ee(t,2)+":"+ee(e,2)+":"+ee(n,2)+"."+ee(i,3)+"Z":n?"T"+ee(t,2)+":"+ee(e,2)+":"+ee(n,2)+"Z":e||t?"T"+ee(t,2)+":"+ee(e,2)+"Z":"")}function Sn(r){var t=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function n(d,m){var c,g,_=i(d,function(A,y){if(c)return c(A,y-1);g=A,c=m?Y0(A,m):Xf(A)});return _.columns=g||[],_}function i(d,m){var c=[],g=d.length,_=0,A=0,y,R=g<=0,T=!1;d.charCodeAt(g-1)===br&&--g,d.charCodeAt(g-1)===ao&&--g;function x(){if(R)return io;if(T)return T=!1,qf;var I,E=_,C;if(d.charCodeAt(E)===oo){for(;_++<g&&d.charCodeAt(_)!==oo||d.charCodeAt(++_)===oo;);return(I=_)>=g?R=!0:(C=d.charCodeAt(_++))===br?T=!0:C===ao&&(T=!0,d.charCodeAt(_)===br&&++_),d.slice(E+1,I-1).replace(/""/g,'"')}for(;_<g;){if((C=d.charCodeAt(I=_++))===br)T=!0;else if(C===ao)T=!0,d.charCodeAt(_)===br&&++_;else if(C!==e)continue;return d.slice(E,I)}return R=!0,d.slice(E,g)}for(;(y=x())!==io;){for(var S=[];y!==qf&&y!==io;)S.push(y),y=x();m&&(S=m(S,A++))==null||c.push(S)}return c}function o(d,m){return d.map(function(c){return m.map(function(g){return u(c[g])}).join(r)})}function a(d,m){return m==null&&(m=Kf(d)),[m.map(u).join(r)].concat(o(d,m)).join(`
`)}function s(d,m){return m==null&&(m=Kf(d)),o(d,m).join(`
`)}function l(d){return d.map(f).join(`
`)}function f(d){return d.map(u).join(r)}function u(d){return d==null?"":d instanceof Date?H0(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:n,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:f,formatValue:u}}h();p();var ct=Sn(","),so=ct.parse,j0=ct.parseRows,W0=ct.format,G0=ct.formatBody,q0=ct.formatRows,K0=ct.formatRow,X0=ct.formatValue;h();p();var ht=Sn("	"),fo=ht.parse,J0=ht.parseRows,Q0=ht.format,ed=ht.formatBody,td=ht.formatRows,rd=ht.formatRow,nd=ht.formatValue;h();p();function kn(r,t){return function(e,n,i){arguments.length<3&&(i=n,n=null);var o=_r(e).mimeType(r);return o.row=function(a){return arguments.length?o.response(id(t,n=a)):n},o.row(n),i?o.get(i):o}}function id(r,t){return function(e){return r(e.responseText,t)}}var od=kn("text/csv",so);h();p();var ad=kn("text/tab-separated-values",fo);var Qf=(r,t,e)=>e.chrPositions[r].pos+t;function sd(r){let t=[],e={},n={},i=0;for(let o=0;o<r.length;o++){let a=Number(r[o][1]);i+=a;let s={id:o,chr:r[o][0],pos:i-a};t.push(s),n[s.chr]=s,e[r[o][0]]=a}return{chrToAbs:([o,a])=>Qf(o,a,{chrPositions:n}),cumPositions:t,chrPositions:n,totalLength:i,chromLengths:e}}function fd(r,t){let e={};return e.absToChr=n=>e.chrPositions?absToChr(n,e):null,e.chrToAbs=([n,i]=[])=>e.chrPositions?Qf(n,i,e):null,no(r,(n,i)=>{if(n)t&&t(null);else{let o=to(i),a=sd(o);Object.keys(a).forEach(s=>{e[s]=a[s]}),t&&t(e)}})}var eu=function(t,...e){if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');class n{constructor(o){this.dataConfig=o,this.trackUid=Jf.default.nice(),this.bigBedFile=null,this.TILE_SIZE=1024,this.errorTxt="",this.dataPromises=[],this.dataPromises.push(this.loadChromsizes(o)),this.dataPromises.push(this.loadBigBed(o))}loadChromsizes(o){return o.chromSizesUrl?new Promise(a=>{fd(o.chromSizesUrl,s=>{this.chromSizes=s,a()})}):(console.error('Please enter a "chromSizesUrl" field to the data config'),null)}async loadBigBed(o){return o.url?(this.bigBedFile=new mr({filehandle:new Ot(o.url)}),this.bigBedFile):(console.error('Please enter a "url" field to the data config'),null)}tilesetInfo(o){return this.tilesetInfoLoading=!0,Promise.all(this.dataPromises).then(()=>{this.tilesetInfoLoading=!1;let a={},s=this.chromSizes.totalLength;return a={tile_size:this.TILE_SIZE,max_zoom:Math.ceil(Math.log(s/this.TILE_SIZE)/Math.log(2)),max_width:2**Math.ceil(Math.log(s)/Math.log(2)),min_pos:[0],max_pos:[s]},o&&o(a),a}).catch(a=>{this.tilesetInfoLoading=!1,console.error(a),o&&o({error:`Error parsing tabix: ${a}`})})}async fetchTilesDebounced(o,a){let s={},l=[],f=[];for(let u of a){let d=u.split("."),m=parseInt(d[0],10),c=parseInt(d[1],10);if(Number.isNaN(c)||Number.isNaN(m)){console.warn("Invalid tile zoom or position:",m,c);continue}l.push(u),f.push(await this.tile(m,c))}for(let u=0;u<f.length;u++){let d=l[u];s[d]=f[u],s[d].tilePositionId=d}return o(s),s}tile(o,a){return this.tilesetInfo().then(async s=>{let l=+s.max_width/2**+o,f=[],u={tilePos:[a],tileId:o+"."+a,zoomLevel:o},m=s.min_pos[0]+a*l,c=s.min_pos[0]+(a+1)*l,{chromLengths:g,cumPositions:_}=this.chromSizes,A=[];for(let y=0;y<_.length;y++){let R=_[y].chr,T=_[y].pos,x=_[y].pos+g[R],S,I;if(T<=m&&m<x)if(c>x){S=m-T,I=x-T;let C=(await this.bigBedFile.getFeatures(R,S,I)).map(k=>{let{start:$,end:O,rest:he,uniqueId:pt}=k,Ne=[R,$,O],Be=he.split("	"),pe=[...Ne,...Be],In=pe.length>=5?parseFloat(pe[4],10):0;A.push({xStart:T+parseInt(pe[1],10),xEnd:T+parseInt(pe[2],10),chrOffset:T,importance:In,uid:pt,fields:pe})});m=x}else{S=Math.floor(m-T),I=Math.ceil(c-T);let C=(await this.bigBedFile.getFeatures(R,S,I)).map(k=>{let{start:$,end:O,rest:he,uniqueId:pt}=k,Ne=[R,$,O],Be=he.split("	"),pe=[...Ne,...Be],In=pe.length>=5?parseFloat(pe[4],10):0;A.push({xStart:T+parseInt(pe[1],10),xEnd:T+parseInt(pe[2],10),chrOffset:T,importance:In,uid:pt,fields:pe})});break}}return A})}}return new n(...e)};eu.config={type:"bigbed"};var ud=eu;export{ud as BigBedDataFetcher};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
//# sourceMappingURL=index.min.js.map
